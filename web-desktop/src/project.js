window.__require=function t(e,i,o){function s(c,r){if(!i[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var h="function"==typeof __require&&__require;if(!r&&h)return h(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+c+"'")}}var d=i[c]={exports:{}};e[c][0].call(d.exports,function(t){return s(e[c][1][t]||t)},d,d.exports,t,e,i,o)}return i[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<o.length;c++)s(o[c]);return s}({AdHelper:[function(t,e,i){"use strict";cc._RF.push(e,"9382e/ziYtARrR5hjBkFdZV","AdHelper");var o=t("Game"),s={initRewardedVideoAd:function(){if(void 0!=window.wx){var t=window.rewardedVideoAd=wx.createRewardedVideoAd({adUnitId:"xxxx"});t.onLoad(function(){o.ad=!0}),t.onError(function(t){o.ad=!1,console.log(t)}),t.onClose(function(t){(t&&t.isEnded||void 0===t)&&window.adCallBack&&window.adCallBack()})}},showRewardedVideoAd:function(t){window.adCallBack=t,window.rewardedVideoAd.show().then(function(){return console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(t){window.rewardedVideoAd.load().then(function(){return window.rewardedVideoAd.show()}).catch(function(t){})})},showBannerAd:function(){if(void 0!=window.wx){window.bannerAd&&window.bannerAd.destroy();var t=window.bannerAd=wx.createBannerAd({adUnitId:"xxxx",style:{left:10,top:76,width:320}});t.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),t.onError(function(t){console.log(t)}),t.show().then(function(){return console.log("banner \u5e7f\u544a\u663e\u793a")}).catch(function(t){return console.log(t)})}}};e.exports=s,cc._RF.pop()},{Game:"Game"}],Ball:[function(t,e,i){"use strict";cc._RF.push(e,"d18c48vSMtNz6oJOIZ7Nuvw","Ball");var o=t("Game"),s=t("Config");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.rolling=!0,this.touchH=!1,this.touchV=!1,this.touchT=!1;for(var t=0;t<5||t>85&&t<95||t>175&&t<185||t>265&&t<275||t>355;)t=360*Math.random();if(this.velocity=cc.v2(Math.sin(t),Math.cos(t)),this.node.runAction(cc.rotateBy(3,360).repeatForever()),this.speed=5,o.mode<=3){var e=s.get(["cfg_classic","cfg_memory","cfg_three"][o.mode-1],o.level);this.speed*=e.monsterSpeed}this.freeze=!1},update:function(){if(this.rolling){var t=this.freeze?.5:1;o.mode>=4&&(t*=.9+.1*o.level),this.node.position=this.node.position.add(this.velocity.mul(t*this.speed))}},onCollisionEnter:function(t,e){if(t.getComponent("Collider").completed){if(0==t.node.rotation||180==t.node.rotation)this.touchV||(this.touchV=!0,this.velocity.x=-this.velocity.x);else if(90==t.node.rotation||-90==t.node.rotation)this.touchH||(this.touchH=!0,this.velocity.y=-this.velocity.y);else if(45==t.node.rotation){if(!this.touchT){var i=this.velocity.x;this.velocity.x=this.velocity.y,this.velocity.y=i}}else if(-45==t.node.rotation&&!this.touchT){i=this.velocity.x;this.velocity.x=-this.velocity.y,this.velocity.y=-i}}else window.btLayer.loseHeart()},onCollisionExit:function(t,e){0==t.node.rotation||180==t.node.rotation?this.touchV=!1:90==t.node.rotation||-90==t.node.rotation?this.touchH=!1:this.touchT=!1}}),cc._RF.pop()},{Config:"Config",Game:"Game"}],BoxMode:[function(t,e,i){"use strict";cc._RF.push(e,"7f8979y4SFNDaC9EDO9lLlm","BoxMode");var o=t("Game");cc.Class({extends:cc.Component,properties:{boxTip:cc.Node,image:cc.Sprite,mask:cc.Node,word:cc.Sprite,starNode:cc.Node,txtUnlock:cc.Label,requireNode:cc.Node,txtStar:cc.Label,txtRequire:cc.Label,txtLevel:cc.Label,txtLevel2:cc.Label,btn:cc.Button},init:function(t){this.id=t,this.unlock=!1,this.boxTip.active=o.mode==t,cc.loader.loadRes("Texture/mode"+t,cc.SpriteFrame,function(t,e){this.image.spriteFrame=e}.bind(this)),cc.loader.loadRes("Texture/UI/word_mode"+t,cc.SpriteFrame,function(t,e){this.word.spriteFrame=e}.bind(this)),this.checkLock(),this.btn.interactable=t<=3},checkLock:function(){for(var t=0,e=0,i=0;i<3;i++)for(var s=o.data.star[i],n=0;n<s.length;n++)e+=s[n];if(1==this.id?(this.unlock=!0,t=85):2==this.id?(this.unlock=o.data.star[0].length>=10,t=30):3==this.id?(this.unlock=o.data.star[1].length>=10,t=30):4==this.id?this.unlock=e>=100:5==this.id&&(this.unlock=e>=200),this.unlock)if(this.mask.active=!1,this.requireNode.active=!1,this.id<=3){this.starNode.active=!0,this.txtUnlock.string="";for(var c=0,r=(s=o.data.star[this.id-1],0);r<s.length;r++)c+=s[r];this.txtStar.string=c+"/"+3*t,this.txtLevel.string=this.txtLevel2.string=s.length+"/"+t}else 4==this.id?(this.starNode.active=!1,this.txtUnlock.string="\u6700\u4f73\u6210\u7ee9 "+o.data.metre+"M",this.txtLevel.string=this.txtLevel2.string=o.data.metre>=20?"\u5df2\u8fbe\u5dc5\u5cf0":"\u5b8c\u6210\u5ea6 "+Math.floor(o.data.metre/20*100)+"%"):5==this.id&&(this.starNode.active=!1,this.txtUnlock.string="\u6700\u4f73\u6210\u7ee9 "+o.data.challenge,this.txtLevel.string=this.txtLevel2.string=o.data.challenge>=30?"\u5df2\u8fbe\u5dc5\u5cf0":"\u5b8c\u6210\u5ea6 "+Math.floor(o.data.challenge/30*100)+"%");else this.mask.active=!0,this.starNode.active=!1,this.txtLevel.string=this.txtLevel2.string="",this.id<=3?(this.txtUnlock.string=2==this.id?"\u9700\u8981\u7ecf\u5178\u6a21\u5f0f\u7b2c10\u5173":"\u9700\u8981\u5f00\u5fc3\u56de\u5fc6\u7b2c10\u5173",this.requireNode.active=!1):this.id<=5?(this.txtUnlock.string="",this.requireNode.active=!0,this.txtRequire.string="\u9700\u8981 "+e+"/"+(4==this.id?100:200)):(this.txtUnlock.string="\u5373\u5c06\u5f00\u653e",this.requireNode.active=!1)},gotoPrepare:function(){o.mode=this.id,cc.director.loadScene("prepare")},doUnlock:function(t){this.mask.active=!0,this.mask.runAction(cc.sequence(cc.delayTime(.5),cc.fadeOut(.5),cc.callFunc(function(){this.mask.active=!1,t()}.bind(this))))}}),cc._RF.pop()},{Game:"Game"}],BtnLevel:[function(t,e,i){"use strict";cc._RF.push(e,"047ec+h2WxIq7dMvwnKp5kp","BtnLevel");var o=t("Game");cc.Class({extends:cc.Component,properties:{label:cc.Label,markComplete:cc.Node,markCurrect:cc.Node,maskLock:cc.Node,starNode:cc.Node,starList:[cc.Node]},init:function(t){this.index=t;var e=o.data.star[o.mode-1];if(t>e.length)this.maskLock.active=!0,this.starNode.active=!1,this.getComponent(cc.Button).interactable=!1;else if(t==e.length)this.markCurrect.active=!0,this.starNode.active=!1;else{this.label.string=t+1,this.markComplete.active=!0;for(var i=e[t],s=0;s<i;s++)this.starList[s].active=!0}},gotoPlay:function(){o.level=this.index+1,cc.director.loadScene("main")}}),cc._RF.pop()},{Game:"Game"}],Collider:[function(t,e,i){"use strict";cc._RF.push(e,"b2c9ff5IQJBbrd59wTtuaVe","Collider"),cc.Class({extends:cc.Component,properties:{sprite:cc.Node},onLoad:function(){this.completed=!1},complete:function(){this.completed=!0,this.sprite.active=!1}}),cc._RF.pop()},{}],Config:[function(t,e,i){"use strict";cc._RF.push(e,"30b552upFFFvoTj8ujb6KXR","Config");var o={jsonTable:{},load:function(t){for(var e=this,i=["cfg_classic","cfg_memory","cfg_three"],o=0,s=function(s){c="Config/"+i[s],cc.loader.loadRes(c,function(e,n){this.jsonTable[i[s]]=n.json,(o+=1)==i.length&&t()}.bind(e))},n=0;n<i.length;n++){var c;s(n)}},get:function(t,e){return this.jsonTable[t][e]}};e.exports=o,cc._RF.pop()},{}],Editor:[function(t,e,i){"use strict";cc._RF.push(e,"039b3lgeElENYX0FxVe9mjC","Editor"),cc.Class({extends:cc.Component,properties:{ground:cc.Graphics,graphics:cc.Graphics,line:cc.Graphics,txtPos:cc.Label,boxPoints:cc.EditBox,boxX:cc.EditBox,boxY:cc.EditBox,signal:cc.Node},onLoad:function(){this.pointList=[],this.drawGround(),this.ground.node.on(cc.Node.EventType.MOUSE_MOVE,this.mouseMove,this)},drawGround:function(){var t=[cc.v2(-340,340),cc.v2(-340,-340),cc.v2(340,-340),cc.v2(340,340)],e=this.ground;e.moveTo(t[0].x,t[0].y);for(var i=1;i<t.length;i++)e.lineTo(t[i].x,t[i].y);e.close(),e.stroke(),e.fill();for(var o=this.line,s=0;s<16;s++)o.moveTo(40*s-300,340),o.lineTo(40*s-300,-340),o.stroke();for(var n=0;n<16;n++)o.moveTo(-340,40*n-300),o.lineTo(340,40*n-300),o.stroke()},mouseMove:function(t){var e=Math.max(Math.min(Math.round(t._x-cc.winSize.width/2),340),-340),i=Math.max(Math.min(Math.round(t._y-cc.winSize.height/2),340),-340);this.txtPos.string="("+e+", "+i+")"},add:function(){if(""!=this.boxX.string&&""!=this.boxY.string){var t=cc.v2(parseInt(this.boxX.string),parseInt(this.boxY.string));this.boxPoints.string=this.boxPoints.string+"("+t.x+";"+t.y+")",this.boxX.string=this.boxY.string="",0==this.pointList.length?this.graphics.moveTo(t.x,t.y):(this.graphics.lineTo(t.x,t.y),this.graphics.stroke()),this.pointList.push(t),this.signal.position=t}},delete:function(){this.pointList.splice(this.pointList.length-1,1);var t=this.graphics;t.clear();var e="";this.pointList.length>0&&(this.signal.position=this.pointList[this.pointList.length-1],t.moveTo(this.pointList[0].x,this.pointList[0].y),e+="("+this.pointList[0].x+";"+this.pointList[0].y+")");for(var i=1;i<this.pointList.length;i++)t.lineTo(this.pointList[i].x,this.pointList[i].y),e+="("+this.pointList[i].x+";"+this.pointList[i].y+")";this.pointList.length>1&&t.stroke(),this.boxPoints.string=e},clear:function(){this.boxPoints.string=this.boxX.string=this.boxY.string="",this.pointList=[],this.graphics.clear()},draw:function(){for(var t=[],e=this.boxPoints.string.slice(1,-1).split(")("),i=0;i<e.length;i++){var o=e[i].split(";"),s=cc.v2(parseInt(o[0]),parseInt(o[1]));t.push(s)}var n=this.graphics;n.clear(),t.length>0&&(this.signal.position=t[t.length-1],n.moveTo(t[0].x,t[0].y));for(var c=1;c<t.length;c++)n.lineTo(t[c].x,t[c].y);t.length>1&&n.stroke(),this.pointList=t}}),cc._RF.pop()},{}],EndLayer:[function(t,e,i){"use strict";cc._RF.push(e,"01016IA6M9OLqauOHhgoKX3","EndLayer");var o=t("Game");cc.Class({extends:cc.Component,properties:{txtCopper:cc.Label,btnDouble:cc.Button,btnNext:cc.Node,shine:cc.Node,anms:[sp.Skeleton],txtLevel:cc.Label,markComplete:cc.Node,markAttention:cc.Node,txtTitle:cc.Label,winNode:cc.Node,loseNode:cc.Node,winBtns:cc.Node,loseBtns:cc.Node,boxLevel:cc.Node,challengeNode:cc.Node,challengeBtns:cc.Node,markKing:cc.Node,txtLevelC:cc.Label,txtHigh:cc.Label,txtProgress:cc.Label,btnDoubleC:cc.Button},init:function(t){this.btnNext.active=t,o.mode<=3?(t?this.initWin():this.initLose(),this.txtLevel.string=o.level):this.initChallenge()},initWin:function(){var t=this;this.star=window.btLayer.star,this.copper=0,this.copperMax=20*this.star,this.shine.runAction(cc.rotateBy(4,360).repeatForever());for(var e=function(e){t.anms[e].node.runAction(cc.sequence(cc.delayTime(.5*e),cc.callFunc(function(){this.anms[e].animation="star"}.bind(t))))},i=0;i<this.star;i++)e(i);this.winBtns.active=!0;var s=o.data.star[o.mode-1];s[o.level-1]?s[o.level-1]<this.star&&(s[o.level-1]=this.star):s.push(this.star),window.uiNode.updateCopper(this.copperMax),o.saveData(),this.checkUnlock()},initLose:function(){this.markComplete.active=!1,this.txtTitle.string="\u54e6\u8c41\uff0c\u5c31\u5dee\u4e00\u70b9\u70b9...",this.loseNode.active=!0,this.winNode.active=!1,this.loseBtns.active=!0},initChallenge:function(){if(this.copper=0,this.copperMax=10*o.level,this.shine.runAction(cc.rotateBy(4,360).repeatForever()),this.boxLevel.active=!1,this.challengeNode.active=!0,this.txtTitle.string="\u83b7\u5f97\u6311\u6218\u5956\u52b1",this.challengeBtns.active=!0,4==o.mode){var t=Math.round(100*window.btLayer.meter)/100;this.txtLevelC.string=t+"M",t>o.data.metre?(this.markKing.active=!0,this.txtHigh.string="\u65b0\u7eaa\u5f55",o.data.metre=t):(this.markKing.active=!1,this.txtHigh.string="\u6700\u4f73\u6210\u7ee9 "+o.data.metre+"M"),this.txtProgress.string="\u52c7\u6500\u9ad8\u5854  "+(o.data.metre>=20?"\u5df2\u8fbe\u5dc5\u5cf0":"\u5b8c\u6210\u5ea6"+Math.floor(o.data.metre/20*100)+"%")}else this.txtLevelC.string="\u7b2c "+o.level+" \u5173",o.level>o.data.challenge?(this.markKing.active=!0,this.txtHigh.string="\u65b0\u7eaa\u5f55",o.data.challenge=o.level):(this.markKing.active=!1,this.txtHigh.string="\u6700\u4f73\u6210\u7ee9 "+o.data.challenge),this.txtProgress.string="\u9ad8\u5206\u7ade\u8d5b  "+(o.data.challenge>=30?"\u5df2\u8fbe\u5dc5\u5cf0":"\u5b8c\u6210\u5ea6"+Math.floor(o.data.challenge/30*100)+"%");window.uiNode.updateCopper(this.copperMax),o.saveData()},nextLevel:function(){window.uiNode.spendEnergy()&&(o.level++,cc.director.loadScene("main"))},retry:function(){window.uiNode.spendEnergy()&&cc.director.loadScene("main")},back:function(){o.mode<=3?cc.director.loadScene("prepare"):cc.director.loadScene("helloworld")},double:function(){this.btnDouble.interactable=!1,this.btnDoubleC.interactable=!1,window.uiNode.updateCopper(this.copperMax),o.saveData(),this.copperMax*=2},update:function(){this.copper<this.copperMax&&(this.copper++,this.txtCopper.string="+"+this.copper)},skip:function(){o.data.star[o.mode-1].push(0),o.saveData(),window.uiNode.spendEnergy()&&this.nextLevel()},checkUnlock:function(){for(var t=!1,e=0,i=0;i<3;i++)for(var s=o.data.star[i],n=0;n<s.length;n++)e+=s[n];o.data.star[0].length>=10&&!o.data.unlock[1]?(o.data.unlock[1]=1,t=!0):o.data.star[1].length>=10&&!o.data.unlock[2]?(o.data.unlock[2]=1,t=!0):e>=100&&!o.data.unlock[3]?(o.data.unlock[3]=1,t=!0):e>=200&&!o.data.unlock[4]&&(o.data.unlock[4]=1,t=!0),this.markAttention.active=t}}),cc._RF.pop()},{Game:"Game"}],EnergyLayer:[function(t,e,i){"use strict";cc._RF.push(e,"d352fR1W8pI9LZ1kgEgy54O","EnergyLayer");var o=t("Game");cc.Class({extends:cc.Component,properties:{},full:function(){this.node.destroy(),o.data.energy=6,window.uiNode.refresh()},close:function(){this.node.destroy()}}),cc._RF.pop()},{Game:"Game"}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"c695f0rYj9JK4KCz1V2sNHB","Game");var o={mode:1,level:1,heart:2,getData:function(t){if(void 0!=window.wx)wx.getStorage({key:"scale",success:function(e){cc.log("getStorageSuccess:"+e.data),void 0!=e.data?(o.data=JSON.parse(e.data),this.checkCompatible(),t()):(this.setDataToBase(),t())}.bind(this),fail:function(){this.setDataToBase(),t()}.bind(this)});else{var e=cc.sys.localStorage.getItem("scale");void 0!=e?(o.data=JSON.parse(e),this.checkCompatible()):this.setDataToBase(),t()}},setDataToBase:function(){o.data={copper:0,energy:6,fullCount:[0,0],star:[[],[],[]],metre:0,challenge:0,sign:0,energyTime:0,sound:!0,unlock:[2,0,0,0,0]}},saveData:function(){void 0!=window.wx?wx.setStorage({key:"scale",data:JSON.stringify(o.data),success:function(){}}):cc.sys.localStorage.setItem("scale",JSON.stringify(o.data))},checkCompatible:function(){}};e.exports=o,cc._RF.pop()},{}],HelloWorld:[function(t,e,i){"use strict";cc._RF.push(e,"3c1c6BjeShPVLeEd+EAbaKC","HelloWorld");var o=t("Game");cc.Class({extends:cc.Component,properties:{UINodePrefab:cc.Prefab,boxMode:cc.Node,infoNode:cc.Node,btnPrev:cc.Node,btnNext:cc.Node,btnStart:cc.Node,mask:cc.Node,markCost:cc.Node,markAttention:cc.Node},onLoad:function(){cc.director.getCollisionManager().enabled=!0,this.createUI(),this.initMode(),this.checkUnlock()},createUI:function(){var t=cc.instantiate(this.UINodePrefab);this.node.addChild(t,1e3)},initMode:function(){this.mode=o.mode-1,this.boxList=[];for(var t=0;t<7;t++){var e=this.boxMode;t>0&&(e=cc.instantiate(this.boxMode),this.infoNode.addChild(e)),e.x=cc.winSize.width*t,e.getComponent("BoxMode").init(t+1),this.boxList.push(e)}this.infoNode.x=-this.mode*cc.winSize.width,this.checkBtn()},changeMode:function(t,e){this.mode+=parseInt(e),this.infoNode.runAction(cc.moveBy(.3,cc.v2(-e*cc.winSize.width,0))),this.checkBtn()},checkBtn:function(){this.btnPrev.active=this.mode>0,this.btnNext.active=this.mode<6,1==o.data.unlock[this.mode]?(this.btnStart.active=!1,this.btnPrev.getComponent(cc.Button).interactable=!1,this.btnNext.getComponent(cc.Button).interactable=!1,this.boxList[this.mode].getComponent("BoxMode").doUnlock(function(){this.btnStart.active=!0,this.btnPrev.getComponent(cc.Button).interactable=!0,this.btnNext.getComponent(cc.Button).interactable=!0,o.data.unlock[this.mode]=2,o.saveData(),this.checkUnlock()}.bind(this))):this.btnStart.active=this.boxList[this.mode].getComponent("BoxMode").unlock},startGame:function(){if(window.uiNode.spendEnergy()){this.mask.active=!0,this.markCost.active=!0;var t=cc.spawn(cc.sequence(cc.scaleTo(.1,1.3),cc.scaleTo(.1,1)),cc.moveBy(.5,cc.v2(0,70)));this.markCost.runAction(cc.sequence(t,cc.fadeOut(.1),cc.callFunc(function(){if(o.mode=this.mode+1,o.mode<=3){o.level=Math.min(o.data.star[o.mode-1].length+1,[85,30,30][o.mode-1])}else o.level=1;cc.director.loadScene("main")}.bind(this))))}},doEditor:function(){cc.director.loadScene("editor")},reset:function(){o.setDataToBase(),o.saveData(),cc.director.loadScene("helloworld")},checkUnlock:function(){for(var t=!1,e=0;e<5;e++)if(1==o.data.unlock[e]){t=!0;break}this.markAttention.active=t}}),cc._RF.pop()},{Game:"Game"}],Opening:[function(t,e,i){"use strict";cc._RF.push(e,"0d3a7lkkPZLpqDV+M1/xdSW","Opening");var o=t("Config"),s=t("Game");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.login()},login:function(){s.getData(function(){o.load(function(){cc.director.loadScene("helloworld")}.bind(this))}.bind(this))}}),cc._RF.pop()},{Config:"Config",Game:"Game"}],PauseLayer:[function(t,e,i){"use strict";cc._RF.push(e,"3f277N4lCBMZJdvbhMRgrDD","PauseLayer");var o=t("Game");cc.Class({extends:cc.Component,properties:{markSound:cc.Sprite},onLoad:function(){cc.loader.loadRes("Texture/UI/mark_sound"+(o.data.sound?1:2),cc.SpriteFrame,function(t,e){this.markSound.spriteFrame=e}.bind(this))},continue:function(){this.node.destroy();for(var t=window.playgound.balls,e=0;e<t.length;e++)t[e].isValid&&(t[e].getComponent("Ball").rolling=!0)},back:function(){o.mode<=3?cc.director.loadScene("prepare"):cc.director.loadScene("helloworld")},retry:function(){window.uiNode.spendEnergy()&&cc.director.loadScene("main")},soundSetting:function(){o.data.sound=!o.data.sound,cc.loader.loadRes("Texture/UI/mark_sound"+(o.data.sound?1:2),cc.SpriteFrame,function(t,e){this.markSound.spriteFrame=e}.bind(this))},help:function(){}}),cc._RF.pop()},{Game:"Game"}],PlayGound:[function(t,e,i){"use strict";cc._RF.push(e,"0ee2epUJOxOI4tyzz/z4+nl","PlayGound");var o=t("Game"),s=t("Config");cc.Class({extends:cc.Component,properties:{graphics:[cc.Graphics],graphicsBase:cc.Graphics,graphicsLine:[cc.Graphics],graphicsNode:cc.Node,colliderPrefab:cc.Prefab,ballPrefab:cc.Prefab,friendPrefab:cc.Prefab,graphicsThrons:[cc.Graphics],scissorPrefab:cc.Prefab},onLoad:function(){if(window.playgound=this,this.width=680,o.mode<=3){this.cfg=s.get(["cfg_classic","cfg_memory","cfg_three"][o.mode-1],o.level)}else 4==o.mode&&(this.width=640);if(this.freeze=!1,2==o.mode){this.points=[];for(var t=this.cfg.shapePos.slice(1,-1).split(")("),e=0;e<t.length;e++){var i=t[e].split(";"),n=cc.v2(parseInt(i[0]),parseInt(i[1]));this.points.push(n)}}else this.points=[cc.v2(-this.width/2,340),cc.v2(-this.width/2,-340),cc.v2(this.width/2,-340),cc.v2(this.width/2,340)];this.refreshColor(),this.draw(),this.drawBase(),this.createColliders(),this.createFriend(),this.createBall(),4==o.mode&&this.createThron()},draw:function(){for(var t=0;t<this.graphics.length;t++){var e=this.graphics[t];e.clear(),e.moveTo(this.points[0].x,this.points[0].y);for(var i=1;i<this.points.length;i++)e.lineTo(this.points[i].x,this.points[i].y);e.close(),e.stroke(),0==t&&e.fill()}},refreshColor:function(){var t=["#C07078","#BE8D67","#F0D365","#5DA469","#4381A6","#847EA8"][Math.floor(6*Math.random())];this.graphics[0].fillColor=cc.color().fromHEX(t),this.graphicsBase.fillColor=cc.color().fromHEX(t+"64")},drawBase:function(){var t=this.graphicsBase;t.clear(),t.moveTo(this.points[0].x,this.points[0].y);for(var e=1;e<this.points.length;e++)t.lineTo(this.points[e].x,this.points[e].y);t.close(),t.fill()},createBall:function(){this.balls=[];for(var t=5==o.mode?1:4==o.mode?2:this.cfg.monsterNum,e=0;e<t;e++){var i=cc.instantiate(this.ballPrefab);this.node.addChild(i),this.balls.push(i);for(var s=null;!s;){for(var n=cc.v2(Math.random()*(this.width-40)-(this.width-40)/2,640*Math.random()-320),c=[cc.v2(-17,17),cc.v2(17,17),cc.v2(17,-17),cc.v2(-17,-17)],r=!1,a=0;a<4;a++){var h=n.add(c[a]),d=n.add(c[3==a?0:a+1]);if(cc.Intersection.linePolygon(h,d,this.points)){r=!0;break}}cc.Intersection.pointInPolygon(n,this.points)&&!r&&(s=n)}i.position=s}},createFriend:function(){if(this.friends=[],this.friendMarks=[],o.mode<=3){var t=this.cfg.friendsNum,e=[];if(o.mode<3)for(var i=this.cfg.friendsPos.slice(1,-1).split(")("),s=0;s<i.length;s++){var n=i[s].split(";"),c=cc.v2(parseInt(n[0]),parseInt(n[1]));e.push(c)}for(var r=0;r<t;r++){var a=cc.instantiate(this.friendPrefab);this.node.addChild(a),this.friends.push(a),a.position=3==o.mode?cc.v2(640*Math.random()-320,640*Math.random()-320):e[r]}}},startSlice:function(t,e){this.pMid=e,this.pCrossList=t,this.scissorsList=[],this.marksList=[];for(var i=0;i<2;i++){var o=this.pCrossList[i].sub(this.pMid),s=cc.instantiate(this.colliderPrefab);s.position=this.pMid,this.node.addChild(s),this.scissorsList.push(s);var n=cc.instantiate(this.scissorPrefab);n.position=this.pMid,this.node.addChild(n),this.marksList.push(n),o.y>0||(o.y<0?s.rotation=n.rotation=180:o.x>0?s.rotation=n.rotation=90:s.rotation=n.rotation=-90)}window.btLayer.touchabled=!1,window.btLayer.slicer.node.scale=1,this.schedule(this.updateSlicer,0)},updateSlicer:function(){for(var t=0,e=0;e<2;e++){var i=5*this.scissorsList[e].scaleY,s=this.pCrossList[e].sub(this.pMid).mag();if(i>=s)i=s,t++,this.marksList[e].isValid&&(this.marksList[e].position=this.pCrossList[e],this.marksList[e].getComponent("Scissor").complete());else{i+=5;var n=this.marksList[e];0==n.rotation?n.y+=5:90==n.rotation?n.x+=5:180==n.rotation?n.y-=5:n.x-=5}this.scissorsList[e].scaleY=i/5}if(t>=2){for(var c=0;c<2;c++)this.scissorsList[c].getComponent("Collider").complete(),this.colliders.push(this.scissorsList[c]);this.unschedule(this.updateSlicer),this.splitPoints(),window.btLayer.slicer.node.position=window.btLayer.selectPos,3==o.mode?window.btLayer.checkThree():window.btLayer.resetSlicer()}},insertTemp:function(t,e){for(var i=0;i<this.pTempList.length;i++)if(this.pTempList[i]===e){this.pTempList.splice(i+1,0,t);break}},splitPoints:function(){for(var t=[[],[]],e=0,i=0;i<this.pTempList.length;i++){var o=this.pTempList[i];o===this.pCrossList[0]||o===this.pCrossList[1]?(t[0].push(o),t[1].push(o),window.btLayer.type>1&&t[e].push(this.pMid),e=1-e):t[e].push(o)}this.selectPolygon(t)},selectPolygon:function(t){for(var e=[0,0],i=[[],[]],s=0;s<2;s++){for(var n=t[s],c=0;c<this.width/10+1;c++)for(var r=0;r<69;r++){var a=cc.v2(-this.width/2+10*c,10*r-340);cc.Intersection.pointInPolygon(a,n)&&e[s]++}for(var h=0;h<this.balls.length;h++)this.balls[h].isValid&&cc.Intersection.pointInPolygon(this.balls[h].position,n)&&i[s].push(this.balls[h])}var d=0;if(4==o.mode){for(var l=0;l<t[1].length;l++)if(340==t[1][l].y){d=1;break}}else i[0].length==i[1].length?e[0]<e[1]&&(d=1):i[0].length<i[1].length&&(d=1);this.points=t[d],this.draw(),window.btLayer.updateStar(e[d]);for(var p=0;p<this.friends.length;p++)this.friends[p].isValid&&cc.Intersection.pointInPolygon(this.friends[p].position,t[1-d])&&(this.friends[p].destroy(),window.btLayer.addStar());for(var u=0;u<i[1-d].length;u++){var f=i[1-d][u];4==o.mode?f.active=!1:f.destroy()}if(4==o.mode&&this.updateTower(),this.freeze){this.freeze=!1;for(var v=0;v<this.balls.length;v++)this.balls[v].isValid&&(this.balls[v].getComponent("Ball").freeze=!1)}},createColliders:function(){this.colliders=[];for(var t=0;t<this.points.length;t++){var e=this.points[t],i=(this.points[t+1]?this.points[t+1]:this.points[0]).sub(e),o=cc.instantiate(this.colliderPrefab);o.position=e,o.scaleY=i.mag()/5,this.node.addChild(o),this.colliders.push(o),o.getComponent("Collider").complete(),i.y>0||(i.y<0?o.rotation=180:i.x>0?o.rotation=90:o.rotation=-90)}},createThron:function(){for(var t=0;t<10;t++)for(var e=cc.v2(64*t-288,308),i=0;i<2;i++){var o=cc.instantiate(this.colliderPrefab);o.position=e,o.scaleY=9.6,this.node.addChild(o),o.getComponent("Collider").complete(),o.rotation=0==i?-45:45}for(var s=0;s<2;s++){(r=this.graphicsThrons[s]).moveTo(-320,350),r.lineTo(-320,340);for(var n=0;n<10;n++){var c=cc.v2(64*n-288,308);r.lineTo(c.x,c.y),r.lineTo(c.x+32,340)}r.lineTo(320,350),r.close(),r.fill()}var r;(r=this.graphicsLine[0]).moveTo(-320,350),r.lineTo(320,350),r.stroke(),(r=this.graphicsLine[1]).moveTo(-320,346),r.lineTo(320,346),r.stroke()},resizeSquare:function(){for(var t=340,e=340,i=-340,o=-340,s=0;s<this.points.length;s++){var n=this.points[s];t=Math.min(t,n.x),e=Math.min(e,n.y),i=Math.max(i,n.x),o=Math.max(o,n.y)}var c=1,r=cc.v2(),a=cc.v2();if(i-t>o-e){c=680/(i-t);for(var h=0;h<this.points.length;h++){(n=this.points[h]).x=Math.round((n.x-t)*c-340),n.y=Math.round((n.y-(o+e)/2)*c)}r=cc.v2(-340-t*c,-(o+e)/2*c),a=cc.v2((this.balls[0].x-t)*c-340,(this.balls[0].y-(o+e)/2)*c)}else{c=680/(o-e);for(var d=0;d<this.points.length;d++){(n=this.points[d]).x=Math.round((n.x-(i+t)/2)*c),n.y=Math.round((n.y-e)*c-340)}r=cc.v2(-(i+t)/2*c,-340-e*c),a=cc.v2((this.balls[0].x-(i+t)/2)*c,(this.balls[0].y-e)*c-340)}for(var l=0,p=0;p<69;p++)for(var u=0;u<69;u++){var f=cc.v2(10*p-340,10*u-340);cc.Intersection.pointInPolygon(f,this.points)&&l++}window.btLayer.total=l;for(var v=0;v<this.colliders.length;v++)this.colliders[v].destroy();this.graphicsBase.clear(),this.graphicsNode.runAction(cc.sequence(cc.spawn(cc.scaleTo(.5,c),cc.moveTo(.5,r)),cc.callFunc(function(){this.graphicsNode.position=cc.v2(),this.graphicsNode.scale=1,this.refreshColor(),this.draw(),this.drawBase(),this.createColliders(),window.btLayer.strip.progress=0,window.btLayer.txtPecent.string="0%"}.bind(this)))),this.balls[0].getComponent("Ball").rolling=!1,this.balls[0].runAction(cc.sequence(cc.moveTo(.5,a),cc.callFunc(function(){var t=360*Math.random();this.balls[0].getComponent("Ball").velocity=cc.v2(Math.sin(t),Math.cos(t)),this.balls[0].getComponent("Ball").rolling=!0}.bind(this)))),window.btLayer.gotoNextLevel()},speedDown:function(){if(!this.freeze){this.freeze=!0;for(var t=0;t<this.balls.length;t++)this.balls[t].isValid&&(this.balls[t].getComponent("Ball").freeze=!0)}},updateTower:function(){for(var t=this,e=340,i=0;i<this.points.length;i++)this.points[i].y<e&&(e=this.points[i].y);if(e>-340){for(var s=e+340,n=0;n<this.points.length;n++)this.points[n].y<340&&(this.points[n].y-=s);this.graphicsNode.y+=s;for(var c=0;c<this.colliders.length;c++)this.colliders[c].destroy();this.refreshColor(),this.draw(),this.graphicsBase.clear(),this.createColliders(),window.btLayer.addMeter(s),o.level++,this.graphicsNode.runAction(cc.sequence(cc.moveTo(.4,cc.v2(0,0)),cc.moveBy(.05,cc.v2(0,30)),cc.moveTo(.05,cc.v2(0,0)),cc.callFunc(function(){this.drawBase(),this.addBall()}.bind(this))));for(var r=function(e){var i=t.balls[e];i.isValid&&i.active&&(i.getComponent("Ball").rolling=!1,i.runAction(cc.sequence(cc.moveBy(.5,cc.v2(0,-s)),cc.callFunc(function(){var t=360*Math.random();i.getComponent("Ball").velocity=cc.v2(Math.sin(t),Math.cos(t)),i.getComponent("Ball").rolling=!0}.bind(t)))))},a=0;a<this.balls.length;a++)r(a)}else this.addBall()},addBall:function(){for(var t=0,e=0;e<this.balls.length;e++){var i=this.balls[e];if(i.isValid&&(!i.active||!cc.Intersection.pointInPolygon(i.position,this.points))){i.active=!0;for(var o=null;!o;){var s=cc.v2(600*Math.random()-300,500*Math.random()-230);cc.Intersection.pointInPolygon(s,this.points)&&(o=s)}i.position=o,t++}}window.btLayer.addPiece(t)}}),cc._RF.pop()},{Config:"Config",Game:"Game"}],PlayLayer:[function(t,e,i){"use strict";cc._RF.push(e,"32a9dKicsVIF4FeRuQq0DvJ","PlayLayer");var o=t("Game"),s=t("Config");cc.Class({extends:cc.Component,properties:{slicers:[cc.Sprite],strip:cc.ProgressBar,txtPecent:cc.Label,starList:[cc.Node],pauseLayerPrefab:cc.Prefab,endLayerPrefab:cc.Prefab,starNode:cc.Node,txtLevel:cc.Label,txtLevel2:cc.Label,txtHeart:cc.Label,friendsNode:cc.Node,friend:cc.Node,reviveLayerPrefab:cc.Prefab,UINodePrefab:cc.Prefab,boxRuler:cc.Node,playGound:cc.Node,rulers:[cc.Node],pieces:[cc.Node],infoNode:cc.Node,boxPiece:cc.Node,txtCosts:[cc.Label]},onLoad:function(){if(window.btLayer=this,this.width=680,o.mode<=3){this.cfg=s.get(["cfg_classic","cfg_memory","cfg_three"][o.mode-1],o.level)}else if(4==o.mode){this.width=640,this.friendsNode.active=!1,this.starNode.active=!1,this.strip.node.active=!1,this.meter=1,this.txtLevel.string=this.txtLevel2.string="1M",this.piece=0,this.boxRuler.active=!0,this.playGound.x=30,this.markRuler=0,this.infoNode.y=480,this.boxPiece.active=!0;for(var t=0;t<4;t++)this.rulers[t].getChildren()[0].getComponent(cc.Label).string=this.markRuler,this.markRuler+=.5}else 5==o.mode&&(this.friendsNode.active=!1,this.starNode.active=!1,this.txtLevel.string=this.txtLevel2.string=1);this.total=69*(this.width/10+1),this.friendsSaved=0,this.heart=2,this.types=[],this.revived=!1,this.gameover=!1,this.star=0,this.costs=[200,100],this.refreshCost(),this.createUI(),this.refreshStrip(),this.createFriendMaks();for(var e=0;e<3;e++)0==e||3==o.mode?(this.slicers[e].node.zIndex=10,this.slicers[e].node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.slicers[e].node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.slicers[e].node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.slicers[e].node.on(cc.Node.EventType.TOUCH_END,this.touchCancel,this),this.resetSlicer(e)):this.slicers[e].node.active=!1},createFriendMaks:function(){if(this.friendMarks=[],o.mode<=3)for(var t=this.cfg.friendsNum,e=0;e<t;e++){var i=this.friend;e>0&&(i=cc.instantiate(this.friend),this.friendsNode.addChild(i)),i.position=cc.v2(-(t-1)/2*60+60*e,0),this.friendMarks.push(i)}},refreshStrip:function(){if(o.mode<=3)for(var t=this.cfg.starRequire.split(";"),e=0;e<3;e++)this.starList[e].x=parseFloat(t[e])/parseFloat(t[2])*620-310},touchStart:function(t){if(this.touchabled){this.slicer=t.target.getComponent(cc.Sprite),this.slicer.node.opacity=190,this.selectPos=this.slicer.node.position;for(var e=0,i=0;i<3;i++)if(this.slicer==this.slicers[i]){e=i;break}this.type=this.types[e]}},touchMove:function(t){if(this.touchabled){this.slicer.node.position=t.touch._point.sub(cc.v2(cc.winSize.width/2,cc.winSize.height/2));var e=this.slicer.node.y+389,i=Math.min(Math.max(0,3*e),200);this.slicer.node.y+=i}},touchCancel:function(t){if(this.touchabled){var e=cc.v2(Math.round(this.slicer.node.x-(4==o.mode?30:0)),Math.round(this.slicer.node.y)-52);if(this.points=window.playgound.points,!cc.Intersection.pointInPolygon(e,this.points)||4==o.mode&&e.y>308)return this.slicer.node.position=this.selectPos,void(this.slicer.node.opacity=255);var i=[cc.v2(e.x,340),cc.v2(this.width/2,e.y),cc.v2(e.x,-340),cc.v2(-this.width/2,e.y)];window.playgound.pTempList=this.points.concat();for(var s=[[1,3],[0,2],[0,3],[0,1],[1,2],[2,3]][this.type],n=[],c=0;c<2;c++){for(var r=s[c],a=i[r],h=680,d=cc.v2(),l=cc.v2(),p=0;p<this.points.length;p++){var u=this.points[p],f=this.points[p+1]?this.points[p+1]:this.points[0];if(cc.Intersection.lineLine(e,a,u,f)){var v=cc.v2();(v=r%2==0?cc.v2(e.x,u.y):cc.v2(u.x,e.y)).sub(e).mag()<h&&(h=v.sub(e).mag(),d=u,l=v)}}window.playgound.insertTemp(l,d),n.push(l)}window.playgound.startSlice(n,e)}},touchEnd:function(){this.type>1?(this.type++,this.type>5&&(this.type=2)):this.type=1-this.type,cc.loader.loadRes("Texture/UI/slicer"+this.type,cc.SpriteFrame,function(t,e){this.slicer.spriteFrame=e}.bind(this))},resetSlicer:function(t){var e=null!=t?t:0;this.touchabled=!0;var i=0;if(4==o.mode){i=[0,4,4,5,5][Math.floor(5*Math.random())]}else i=Math.floor(6*Math.random());this.refreshClicer(e,i)},refreshClicer:function(t,e){var i=this.types[t];(null==i||i<2&&e>=2||i>=2&&e<2)&&cc.loader.loadRes("Texture/UI/image_slicer"+(e<2?1:2),cc.SpriteFrame,function(e,i){this.slicers[t]&&(this.slicers[t].spriteFrame=i)}.bind(this));this.slicers[t].node.rotation=[0,90,0,90,180,270][e],this.slicers[t].node.opacity=255,this.types[t]=e},loseHeart:function(){window.playgound.unschedule(window.playgound.updateSlicer);for(var t=0;t<2;t++)window.playgound.scissorsList[t].destroy(),window.playgound.marksList[t].isValid&&window.playgound.marksList[t].destroy();this.slicer.node.position=this.selectPos,this.slicer.node.opacity=255,3==o.mode?this.checkThree():(this.resetSlicer(),this.heart--,this.txtHeart.string=this.heart,this.heart<=0&&this.lose())},openEnding:function(t){var e=cc.instantiate(this.endLayerPrefab);e.getComponent("EndLayer").init(t),this.node.addChild(e,20)},updateStar:function(t){var e=this,i=.27+.03*o.level,s=(this.total-t)/this.total;if(o.mode<=3){var n=this.cfg.starRequire.split(";");i=parseFloat(n[2]);for(var c=function(t){if(s>=parseFloat(n[t])&&t+1>e.star){e.star++,cc.loader.loadRes("Texture/UI/mark_star2",cc.SpriteFrame,function(e,i){this.starList[t]&&(this.starList[t].getComponent(cc.Sprite).spriteFrame=i)}.bind(e));var i=e.starList[t].getChildren()[0];i.active=!0,i.scale=1,i.runAction(cc.sequence(cc.spawn(cc.rotateBy(.3,144),cc.scaleTo(.2,1.5)),cc.delayTime(.1),cc.scaleTo(.2,.7).easing(cc.easeIn(2))))}},r=0;r<3;r++)c(r)}else 5==o.mode&&s>=i&&window.playgound.resizeSquare();this.strip.progress=s/i},addStar:function(){this.friendsSaved++;var t=this.cfg.friendsNum;this.friendsSaved>=t&&(this.gameover=!0,this.openEnding(!0));var e=this.friendsSaved-1;cc.loader.loadRes("Texture/UI/image_friend2",cc.SpriteFrame,function(t,i){this.friendMarks[e]&&(this.friendMarks[e].getComponent(cc.Sprite).spriteFrame=i,this.friendMarks[e].getComponent(cc.Button).interactable=!0)}.bind(this))},gotoNextLevel:function(){o.level++,this.txtLevel.string=this.txtLevel2.string=o.level,this.txtLevel2.node.position=cc.v2(0,-528),this.txtLevel2.node.scale=10,this.txtLevel2.node.opacity=150,this.txtLevel2.node.runAction(cc.spawn(cc.scaleTo(.5,1),cc.moveTo(.5,cc.v2(2,10),cc.fadeIn(.5))))},change:function(){if(window.uiNode.updateCopper(-this.costs[1])){for(var t=0;t<3;t++)if(this.slicers[t].node.active){for(var e=this.types[t];e==this.types[t];)if(4==o.mode){e=[0,4,4,5,5][Math.floor(5*Math.random())]}else e=Math.floor(6*Math.random());this.refreshClicer(t,e)}this.costs[1]+=100,this.refreshCost(),o.saveData()}},speedDown:function(){window.uiNode.updateCopper(-this.costs[0])&&(window.playgound.speedDown(),this.refreshCost(),o.saveData())},stop:function(){var t=cc.instantiate(this.pauseLayerPrefab);this.node.addChild(t,20);for(var e=window.playgound.balls,i=0;i<e.length;i++)e[i].isValid&&(e[i].getComponent("Ball").rolling=!1)},checkThree:function(){if(this.slicer.node.active=!1,this.touchabled=!0,!this.gameover){for(var t=0,e=0;e<3;e++)this.slicers[e].node.active&&t++;t<=0&&this.lose()}},lose:function(){if(!this.gameover)if(this.gameover=!0,this.revived)this.openEnding(!1);else{var t=cc.instantiate(this.reviveLayerPrefab);this.node.addChild(t,20)}},addMeter:function(t){var e=this;this.meter+=t/680,this.txtLevel.string=this.txtLevel2.string=Math.round(100*this.meter)/100+"M";for(var i=function(i){var o=e.rulers[i];o.runAction(cc.sequence(cc.moveBy(.4,cc.v2(0,-t)),cc.moveBy(.05,cc.v2(0,30)),cc.moveBy(.05,cc.v2(0,-30)),cc.callFunc(function(){o.y<=-640&&(o.y+=1336,o.getChildren()[0].getComponent(cc.Label).string=this.markRuler,this.markRuler+=.5)}.bind(e))))},o=0;o<4;o++)i(o)},addPiece:function(t){for(var e=0;e<t;e++){this.piece++,this.pieces[this.piece>3?0:this.piece-1].runAction(cc.sequence(cc.delayTime(.35*e),cc.fadeIn(0),cc.scaleTo(0,2),cc.scaleTo(.3,1).easing(cc.easeIn(2)),cc.callFunc(function(){if(this.piece>=3){this.piece-=3,this.heart++,this.txtHeart.string=this.heart;for(var t=0;t<3;t++)this.pieces[t].opacity=0}}.bind(this))))}},revive:function(){if(this.revived=!0,this.heart=2,this.txtHeart.string=2,this.gameover=!1,3==o.mode)for(var t=0;t<3;t++)this.slicers[t].node.active=!0,this.resetSlicer(t);else this.resetSlicer()},createUI:function(){var t=cc.instantiate(this.UINodePrefab);this.node.addChild(t,1e3)},refreshCost:function(){for(var t=0;t<2;t++)this.txtCosts[t].string=this.costs[t],this.txtCosts[t].node.color=o.data.copper>=this.costs[t]?cc.color(98,98,98):cc.Color.RED}}),cc._RF.pop()},{Config:"Config",Game:"Game"}],Prepare:[function(t,e,i){"use strict";cc._RF.push(e,"807924B+/NFNoJMOgJ1ruNO","Prepare");var o=t("Game");cc.Class({extends:cc.Component,properties:{content:cc.Node,UINodePrefab:cc.Prefab,btnPrefab:cc.Prefab,txtProgress:cc.Label,markAttention:cc.Node},onLoad:function(){this.createUI(),this.initContent(),this.checkUnlock()},initContent:function(){for(var t=[85,30,30],e=0;e<t[o.mode-1];e++){var i=cc.instantiate(this.btnPrefab);i.position=cc.v2(e%4*176-264,-100-220*Math.floor(e/4)),i.getComponent("BtnLevel").init(e),this.content.addChild(i)}this.content.height=Math.max(900,20+220*Math.ceil(t[o.mode-1]/4)),this.txtProgress.string=o.data.star[o.mode-1].length+"/"+t[o.mode-1]},back:function(){cc.director.loadScene("helloworld")},createUI:function(){var t=cc.instantiate(this.UINodePrefab);this.node.addChild(t,1e3)},checkUnlock:function(){for(var t=!1,e=0;e<5;e++)if(1==o.data.unlock[e]){t=!0;break}this.markAttention.active=t}}),cc._RF.pop()},{Game:"Game"}],ReviveLayer:[function(t,e,i){"use strict";cc._RF.push(e,"0483cI1cPhMkpz244nePWEt","ReviveLayer");t("Game");cc.Class({extends:cc.Component,properties:{txtTime:cc.Label},onLoad:function(){this.time=6,this.schedule(this.updateTime,1)},updateTime:function(){this.time--,this.txtTime.string=this.time,this.time<=0&&this.skip()},revive:function(){this.node.destroy(),window.btLayer.revive()},skip:function(){this.node.destroy(),window.btLayer.openEnding(!1)}}),cc._RF.pop()},{Game:"Game"}],Scissor:[function(t,e,i){"use strict";cc._RF.push(e,"b8a30RJLaNMqpls/FRdWxfD","Scissor"),cc.Class({extends:cc.Component,properties:{scissor:cc.Node,round:cc.Node},onLoad:function(){this.completed=!1},complete:function(){this.completed||(this.completed=!0,this.scissor.active=!1,this.round.active=!0,this.round.scale=.1,this.round.runAction(cc.sequence(cc.spawn(cc.scaleTo(.3,1),cc.fadeOut(.3)),cc.callFunc(function(){this.node.destroy()}.bind(this)))))}}),cc._RF.pop()},{}],SdkHelper:[function(t,e,i){"use strict";cc._RF.push(e,"7ea11u0rxpOnK+/KSJNlgLH","SdkHelper");var o=t("Game"),s=t("Utils"),n={initListener:function(){void 0!=window.wx&&(wx.showShareMenu(),wx.onShareAppMessage(function(){var t=Math.floor(5*Math.random());return{title:[][t],imageUrl:s.getMd5Url("resources/Texture/share"+(t+1)+".png"),query:window.openid}}),wx.onShow(function(t){}),wx.onAudioInterruptionEnd(function(){}))},shareAppMessage:function(t){if(void 0!=window.wx){var e=Math.floor(5*Math.random());wx.shareAppMessage({title:[][e],imageUrl:s.getMd5Url("resources/Texture/share"+(e+1)+".png"),query:window.openid,success:function(e){console.log(e),t&&t()}})}else t&&t()},login:function(t){wx.cloud.callFunction({name:"login",success:function(e){window.openid=e.result.openid,o.delta=e.result.time-Date.now(),t()},fail:function(e){console.error("get openid failed with error",e),t()}})},getPlatForm:function(){void 0!=window.wx&&wx.getSystemInfo({success:function(t){window.platform=t.platform},fail:function(t){}})},playMusic:function(t){void 0!=window.wx&&o.data.sound&&(window.music||(window.music=window.wx.createInnerAudioContext(),window.music.loop=!0),window.music.src=t,window.music.play())},playEffect:function(t){void 0!=window.wx&&o.data.sound&&(window.effect||(window.effect=window.wx.createInnerAudioContext(),window.effect.loop=!1),window.effect.src=t,window.effect.play())},updateVolume:function(){void 0!=window.wx&&(o.data.sound?n.playMusic(s.getMd5Url("resources/Sound/main.mp3")):(window.music&&window.music.stop(),window.effect&&window.effect.stop()))},getSync:function(t){if(void 0!=window.wx&&window.openid){var e=wx.cloud.database();e.collection("score").doc(window.openid+"-score").get().then(function(i){console.log("\u83b7\u53d6\u540c\u6b65\u6570\u636e\u6210\u529f",i),i.data.score>o.data.score&&(o.data.score=i.data.score),t(),console.log(e.serverDate())}).catch(function(e){console.log("\u83b7\u53d6\u540c\u6b65\u6570\u636e\u5931\u8d25",e),t()})}else t()},submitSync:function(){void 0!=window.wx&&window.openid&&o.data.score>=0&&wx.cloud.callFunction({name:"uploadScore",data:{score:o.data.score},success:function(t){console.log("\u540c\u6b65\u6570\u636e\u6210\u529f",t)},fail:function(t){console.error("\u540c\u6b65\u6570\u636e\u5931\u8d25",t)}})},getTime:function(){return Date.now()+o.delta}};e.exports=n,cc._RF.pop()},{Game:"Game",Utils:"Utils"}],UINode:[function(t,e,i){"use strict";cc._RF.push(e,"7533bQa0kpCGK2jV3yFpzrs","UINode");var o=t("Game");cc.Class({extends:cc.Component,properties:{topNode:cc.Node,txtCopper:cc.Label,txtEnergy:cc.Label,strip:cc.ProgressBar,energyLayerPrefab:cc.Prefab},onLoad:function(){window.uiNode=this;var t=cc.view.getFrameSize();t.height/t.width>1.78&&(this.topNode.height=180),this.refresh()},refresh:function(){this.txtCopper.string=o.data.copper,this.txtEnergy.string=o.data.energy+"/6",this.strip.progress=o.data.energy/6},spendEnergy:function(){if(o.data.energy>0)return o.data.energy--,this.refresh(),o.saveData(),!0;var t=cc.instantiate(this.energyLayerPrefab);return this.node.addChild(t),!1},updateCopper:function(t){return!(t<0&&t+o.data.copper<0)&&(o.data.copper+=t,this.refresh(),!0)}}),cc._RF.pop()},{Game:"Game"}],Utils:[function(t,e,i){"use strict";cc._RF.push(e,"8efe8jAGDJOiL9rfH6CJfhG","Utils");var o={numberFormat:function(t){return t/1e13>=1?Math.floor(t/1e12)+"T":t/1e10>=1?Math.floor(t/1e9)+"B":t/1e7>=1?Math.floor(t/1e6)+"M":t/1e4>=1?Math.floor(t/1e3)+"K":t},timeFormat:function(t,e){var i=Math.round(t/1e3),o=i%60,s=e>1?Math.floor(i/60)%60:Math.floor(i/60),n=3==e?Math.floor(i/3600)%24:Math.floor(i/3600),c=Math.floor(i/86400),r=function(t){return t<10?"0"+t:t};return 1==e?r(s)+":"+r(o):2==e?r(n)+":"+r(s)+":"+r(o):c+"\u5929"+n+"\u65f6"+s+"\u5206"},getDifferentRandomNum:function(t,e,i){e=e||1,i=i||0;for(var o=[];o.length<t;){for(var s=Math.floor(Math.random()*(e-i+1))+i,n=!1,c=0;c<o.length;c++)if(o[c]-s==0){n=!0;break}n||o.push(s)}return o},createImage:function(t,e){if(void 0!=window.wx)try{var i=wx.createImage();i.onload=function(){try{var t=new cc.Texture2D;t.initWithElement(i),t.handleLoadedTexture(),e.spriteFrame=new cc.SpriteFrame(t)}catch(t){cc.log(t),e.node.active=!1}},i.src=t}catch(t){cc.log(t),e.node.active=!1}else try{cc.loader.load({url:t,type:"jpg"},function(t,i){e.spriteFrame=new cc.SpriteFrame(i)})}catch(t){cc.log(t),e.node.active=!1}},substring:function(t,e){if(t.replace(/[\u4e00-\u9fa5]/g,"**").length<=e)return t;for(var i=0,o="",s=0;s<t.length&&(/[\u4e00-\u9fa5]/.test(t[s])?i+=2:i+=1,!(i>e));s++)o+=t[s];return o},getMd5Url:function(t){return cc.loader.md5Pipe?cc.loader.md5Pipe.transformURL(cc.url.raw(t)):cc.url.raw(t)}};e.exports=o,cc._RF.pop()},{}]},{},["AdHelper","Ball","BoxMode","BtnLevel","Collider","Config","Editor","EndLayer","EnergyLayer","Game","HelloWorld","Opening","PauseLayer","PlayGound","PlayLayer","Prepare","ReviveLayer","Scissor","SdkHelper","UINode","Utils"]);