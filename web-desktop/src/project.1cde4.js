window.__require=function e(t,i,o){function n(c,a){if(!i[c]){if(!t[c]){var r=c.split("/");if(r=r[r.length-1],!t[r]){var d="function"==typeof __require&&__require;if(!a&&d)return d(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+c+"'")}}var h=i[c]={exports:{}};t[c][0].call(h.exports,function(e){return n(t[c][1][e]||e)},h,h.exports,e,t,i,o)}return i[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<o.length;c++)n(o[c]);return n}({AdHelper:[function(e,t,i){"use strict";cc._RF.push(t,"9382e/ziYtARrR5hjBkFdZV","AdHelper");var o=e("Game"),n={initRewardedVideoAd:function(){if(void 0!=window.wx){var e=window.rewardedVideoAd=wx.createRewardedVideoAd({adUnitId:"xxxx"});e.onLoad(function(){o.ad=!0}),e.onError(function(e){o.ad=!1,console.log(e)}),e.onClose(function(e){(e&&e.isEnded||void 0===e)&&window.adCallBack&&window.adCallBack()})}},showRewardedVideoAd:function(e){window.adCallBack=e,window.rewardedVideoAd.show().then(function(){return console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(e){window.rewardedVideoAd.load().then(function(){return window.rewardedVideoAd.show()}).catch(function(e){})})},showBannerAd:function(){if(void 0!=window.wx){window.bannerAd&&window.bannerAd.destroy();var e=window.bannerAd=wx.createBannerAd({adUnitId:"xxxx",style:{left:10,top:76,width:320}});e.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),e.onError(function(e){console.log(e)}),e.show().then(function(){return console.log("banner \u5e7f\u544a\u663e\u793a")}).catch(function(e){return console.log(e)})}}};t.exports=n,cc._RF.pop()},{Game:"Game"}],Ball:[function(e,t,i){"use strict";cc._RF.push(t,"d18c48vSMtNz6oJOIZ7Nuvw","Ball");var o=e("Game"),n=e("Config");cc.Class({extends:cc.Component,properties:{sprite:cc.Sprite},init:function(e){this.rolling=!0,this.touchH=!1,this.touchV=!1,this.touchT=!1;var t=[17,17,17,17,20,23,26,29];cc.loader.loadRes("Texture/UI/image_enemy"+e,cc.SpriteFrame,function(e,t){this.sprite.spriteFrame=t}.bind(this)),this.node.width=this.node.height=2*t[e-1],this.getComponent(cc.CircleCollider).radius=t[e-1];for(var i=0;i<5||i>85&&i<95||i>175&&i<185||i>265&&i<275||i>355;)i=360*Math.random();if(this.velocity=cc.v2(Math.sin(i),Math.cos(i)),this.node.runAction(cc.rotateBy(3,360).repeatForever()),this.speed=[5,6,7,8,4.5,4,3.5,3][e-1],o.mode<=3){var s=n.get(["cfg_classic","cfg_memory","cfg_three"][o.mode-1],o.level);this.speed*=s.monsterSpeed}this.freeze=!1},update:function(){if(this.rolling){var e=this.freeze?.5:1;o.mode>=4&&(e*=.9+.1*o.level),this.node.position=this.node.position.add(this.velocity.mul(e*this.speed)),this.checkPos()}},onCollisionEnter:function(e,t){if(e.getComponent("Collider").completed){if(0==e.node.rotation||180==e.node.rotation)this.touchV||(this.touchV=!0,this.velocity.x=-this.velocity.x);else if(90==e.node.rotation||-90==e.node.rotation)this.touchH||(this.touchH=!0,this.velocity.y=-this.velocity.y);else if(45==e.node.rotation){if(!this.touchT){var i=this.velocity.x;this.velocity.x=this.velocity.y,this.velocity.y=i}}else if(-45==e.node.rotation&&!this.touchT){i=this.velocity.x;this.velocity.x=-this.velocity.y,this.velocity.y=-i}}else window.btLayer.loseHeart(this.node.position)},onCollisionExit:function(e,t){0==e.node.rotation||180==e.node.rotation?this.touchV=!1:90==e.node.rotation||-90==e.node.rotation?this.touchH=!1:this.touchT=!1},checkPos:function(){if(!window.playgound.round.active&&!cc.Intersection.pointInPolygon(this.node.position,window.playgound.points)){for(var e=null;!e;){var t=cc.v2(640*Math.random()-320,640*Math.random()-320);cc.Intersection.pointInPolygon(t,this.points)&&(e=t)}ball.position=e}}}),cc._RF.pop()},{Config:"Config",Game:"Game"}],BoxMode:[function(e,t,i){"use strict";cc._RF.push(t,"7f8979y4SFNDaC9EDO9lLlm","BoxMode");var o=e("Game");cc.Class({extends:cc.Component,properties:{boxTip:cc.Node,image:cc.Sprite,mask:cc.Node,txtMode:cc.Label,txtMode2:cc.Label,starNode:cc.Node,txtUnlock:cc.Label,requireNode:cc.Node,txtStar:cc.Label,txtRequire:cc.Label,txtLevel:cc.Label,txtLevel2:cc.Label,btn:cc.Button},init:function(e){this.id=e,this.unlock=!1,this.boxTip.active=o.mode==e,cc.loader.loadRes("Texture/mode"+e,cc.SpriteFrame,function(e,t){this.image.spriteFrame=t}.bind(this));this.txtMode.string=this.txtMode2.string=["\u7ecf\u5178\u95ef\u5173","\u5f00\u5fc3\u56de\u5fc6","\u4e09\u6bb5\u9ad8\u624b","\u52c7\u6500\u9ad8\u5854","\u9ad8\u5206\u7ade\u8d5b","\u5341\u79d2\u5927\u5e08","\u51a0\u519b\u7ade\u8d5b"][e-1],this.checkLock(),this.btn.interactable=e<=3},checkLock:function(){for(var e=0,t=0,i=0;i<3;i++)for(var n=o.data.star[i],s=0;s<n.length;s++)t+=n[s];if(1==this.id?(this.unlock=!0,e=85):2==this.id?(this.unlock=o.data.star[0].length>=10,e=30):3==this.id?(this.unlock=t>=150,e=30):4==this.id?this.unlock=o.data.star[1].length>=10:5==this.id&&(this.unlock=t>=100),this.unlock)if(this.mask.active=!1,this.requireNode.active=!1,this.id<=3){this.starNode.active=!0,this.txtUnlock.string="";for(var c=0,a=(n=o.data.star[this.id-1],0);a<n.length;a++)c+=n[a];this.txtStar.string=c+"/"+3*e,this.txtLevel.string=this.txtLevel2.string=n.length+"/"+e}else 4==this.id?(this.starNode.active=!1,this.txtUnlock.string="\u6700\u4f73\u6210\u7ee9 "+o.data.metre+"M",this.txtLevel.string=this.txtLevel2.string=o.data.metre>=20?"\u5df2\u8fbe\u5dc5\u5cf0":"\u5b8c\u6210\u5ea6 "+Math.floor(o.data.metre/20*100)+"%"):5==this.id&&(this.starNode.active=!1,this.txtUnlock.string="\u6700\u4f73\u6210\u7ee9 "+o.data.challenge,this.txtLevel.string=this.txtLevel2.string=o.data.challenge>=30?"\u5df2\u8fbe\u5dc5\u5cf0":"\u5b8c\u6210\u5ea6 "+Math.floor(o.data.challenge/30*100)+"%");else this.mask.active=!0,this.starNode.active=!1,this.txtLevel.string=this.txtLevel2.string="",2==this.id?(this.txtUnlock.string="\u9700\u8981\u7ecf\u5178\u6a21\u5f0f\u7b2c10\u5173",this.requireNode.active=!1):4==this.id?(this.txtUnlock.string="\u9700\u8981\u5f00\u5fc3\u56de\u5fc6\u7b2c10\u5173",this.requireNode.active=!1):5==this.id||3==this.id?(this.txtUnlock.string="",this.requireNode.active=!0,this.txtRequire.string="\u9700\u8981 "+t+"/"+(5==this.id?100:150)):(this.txtUnlock.string="\u5373\u5c06\u5f00\u653e",this.requireNode.active=!1)},gotoPrepare:function(){o.mode=this.id,cc.director.loadScene("prepare")},doUnlock:function(e){this.mask.active=!0,this.mask.runAction(cc.sequence(cc.delayTime(.5),cc.fadeOut(.5),cc.callFunc(function(){this.mask.active=!1,e()}.bind(this))))}}),cc._RF.pop()},{Game:"Game"}],BtnLevel:[function(e,t,i){"use strict";cc._RF.push(t,"047ec+h2WxIq7dMvwnKp5kp","BtnLevel");var o=e("Game");cc.Class({extends:cc.Component,properties:{label:cc.Label,markComplete:cc.Node,markCurrect:cc.Node,maskLock:cc.Node,starNode:cc.Node,starList:[cc.Node],icon:cc.Sprite},init:function(e){this.index=e;var t=o.data.star[o.mode-1];if(e>t.length)this.maskLock.active=!0,this.starNode.active=!1,this.getComponent(cc.Button).interactable=!1;else if(e==t.length)this.markCurrect.active=!0,this.starNode.active=!1;else{2==o.mode?cc.loader.loadRes("Texture/icon/"+(e+1),cc.SpriteFrame,function(e,t){this.icon.spriteFrame=t}.bind(this)):this.label.string=e+1,this.markComplete.active=!0;for(var i=t[e],n=0;n<i;n++)this.starList[n].active=!0}},gotoPlay:function(){window.uiNode.spendEnergy()&&(o.level=this.index+1,cc.director.loadScene("main"))}}),cc._RF.pop()},{Game:"Game"}],Collider:[function(e,t,i){"use strict";cc._RF.push(t,"b2c9ff5IQJBbrd59wTtuaVe","Collider"),cc.Class({extends:cc.Component,properties:{sprite:cc.Node},onLoad:function(){this.completed=!1},complete:function(){this.completed=!0,this.sprite.active=!1}}),cc._RF.pop()},{}],Config:[function(e,t,i){"use strict";cc._RF.push(t,"30b552upFFFvoTj8ujb6KXR","Config");var o={jsonTable:{},load:function(e){for(var t=this,i=["cfg_classic","cfg_memory","cfg_three"],o=0,n=function(n){c="Config/"+i[n],cc.loader.loadRes(c,function(t,s){this.jsonTable[i[n]]=s.json,(o+=1)==i.length&&e()}.bind(t))},s=0;s<i.length;s++){var c;n(s)}},get:function(e,t){return this.jsonTable[e][t]}};t.exports=o,cc._RF.pop()},{}],DailyLayer:[function(e,t,i){"use strict";cc._RF.push(t,"28eb99DPq9OdZ0rMHlLxUgF","DailyLayer");var o=e("Game"),n=e("SdkHelper");cc.Class({extends:cc.Component,properties:{shine:cc.Node,txtBtn:cc.Label,btn:cc.Button},onLoad:function(){window.dailyLayer=this,this.shine&&this.shine.runAction(cc.rotateBy(4,360).repeatForever())},getDaily:function(){var e=function(e){Math.floor(o.data.sign/864e5)>=Math.floor(n.getTime()/864e5)?window.uiNode.doTip("\u4eca\u65e5\u5df2\u9886\u53d6\uff0c\u8bf7\u660e\u5929\u518d\u6765"):e&&!window.uiNode.showShare()||(o.data.sign=n.getTime(),window.uiNode.updateCopper(1e3),window.uiNode.showMoney(),o.saveData())}.bind(this);o.ad||n.shareAppMessage(function(){e(!0)}.bind(this))},close:function(){window.dailyLayer=null,this.node.destroy()},check:function(){Math.floor(o.data.sign/864e5)>=Math.floor(n.getTime()/864e5)&&(this.txtBtn.string="\u660e \u5929 \u518d \u6765",this.btn.interactable=!1)}}),cc._RF.pop()},{Game:"Game",SdkHelper:"SdkHelper"}],Editor:[function(e,t,i){"use strict";cc._RF.push(t,"039b3lgeElENYX0FxVe9mjC","Editor"),cc.Class({extends:cc.Component,properties:{ground:cc.Graphics,graphics:cc.Graphics,line:cc.Graphics,txtPos:cc.Label,boxPoints:cc.EditBox,boxX:cc.EditBox,boxY:cc.EditBox,signal:cc.Node},onLoad:function(){this.pointList=[],this.drawGround(),this.ground.node.on(cc.Node.EventType.MOUSE_MOVE,this.mouseMove,this)},drawGround:function(){var e=[cc.v2(-340,340),cc.v2(-340,-340),cc.v2(340,-340),cc.v2(340,340)],t=this.ground;t.moveTo(e[0].x,e[0].y);for(var i=1;i<e.length;i++)t.lineTo(e[i].x,e[i].y);t.close(),t.stroke(),t.fill();for(var o=this.line,n=0;n<16;n++)o.moveTo(40*n-300,340),o.lineTo(40*n-300,-340),o.stroke();for(var s=0;s<16;s++)o.moveTo(-340,40*s-300),o.lineTo(340,40*s-300),o.stroke()},mouseMove:function(e){var t=Math.max(Math.min(Math.round(e._x-cc.winSize.width/2),340),-340),i=Math.max(Math.min(Math.round(e._y-cc.winSize.height/2),340),-340);this.txtPos.string="("+t+", "+i+")"},add:function(){if(""!=this.boxX.string&&""!=this.boxY.string){var e=cc.v2(parseInt(this.boxX.string),parseInt(this.boxY.string));this.boxPoints.string=this.boxPoints.string+"("+e.x+";"+e.y+")",this.boxX.string=this.boxY.string="",0==this.pointList.length?this.graphics.moveTo(e.x,e.y):(this.graphics.lineTo(e.x,e.y),this.graphics.stroke()),this.pointList.push(e),this.signal.position=e}},delete:function(){this.pointList.splice(this.pointList.length-1,1);var e=this.graphics;e.clear();var t="";this.pointList.length>0&&(this.signal.position=this.pointList[this.pointList.length-1],e.moveTo(this.pointList[0].x,this.pointList[0].y),t+="("+this.pointList[0].x+";"+this.pointList[0].y+")");for(var i=1;i<this.pointList.length;i++)e.lineTo(this.pointList[i].x,this.pointList[i].y),t+="("+this.pointList[i].x+";"+this.pointList[i].y+")";this.pointList.length>1&&e.stroke(),this.boxPoints.string=t},clear:function(){this.boxPoints.string=this.boxX.string=this.boxY.string="",this.pointList=[],this.graphics.clear()},draw:function(){for(var e=[],t=this.boxPoints.string.slice(1,-1).split(")("),i=0;i<t.length;i++){var o=t[i].split(";"),n=cc.v2(parseInt(o[0]),parseInt(o[1]));e.push(n)}var s=this.graphics;s.clear(),e.length>0&&(this.signal.position=e[e.length-1],s.moveTo(e[0].x,e[0].y));for(var c=1;c<e.length;c++)s.lineTo(e[c].x,e[c].y);e.length>1&&s.stroke(),this.pointList=e}}),cc._RF.pop()},{}],EndLayer:[function(e,t,i){"use strict";cc._RF.push(t,"01016IA6M9OLqauOHhgoKX3","EndLayer");var o=e("Game"),n=e("SdkHelper");cc.Class({extends:cc.Component,properties:{txtCopper:cc.Label,btnDouble:cc.Button,btnNext:cc.Node,shine:cc.Node,anms:[sp.Skeleton],txtLevel:cc.Label,markComplete:cc.Node,markAttention:cc.Node,txtTitle:cc.Label,winNode:cc.Node,loseNode:cc.Node,winBtns:cc.Node,loseBtns:cc.Node,boxLevel:cc.Node,challengeNode:cc.Node,challengeBtns:cc.Node,markKing:cc.Node,txtLevelC:cc.Label,txtHigh:cc.Label,txtProgress:cc.Label,btnDoubleC:cc.Button,icon:cc.Sprite,goldPrefab:cc.Prefab},init:function(e){this.btnNext.active=e,this.shareGot=!1,o.mode<=3?(e?this.initWin():this.initLose(),2==o.mode?cc.loader.loadRes("Texture/icon/"+o.level,cc.SpriteFrame,function(e,t){this.icon.spriteFrame=t}.bind(this)):this.txtLevel.string=o.level):this.initChallenge()},initWin:function(){var e=this;this.star=window.btLayer.star,this.copper=0,this.copperMax=20*this.star,this.shine.runAction(cc.rotateBy(4,360).repeatForever());for(var t=function(t){e.anms[t].node.runAction(cc.sequence(cc.delayTime(.5*t),cc.callFunc(function(){this.anms[t].animation="star"}.bind(e))))},i=0;i<this.star;i++)t(i);this.winBtns.active=!0;var n=o.data.star[o.mode-1];null!=n[o.level-1]?n[o.level-1]<this.star&&(n[o.level-1]=this.star):(n.push(this.star),1==o.mode&&this.submitScore(n.length)),window.uiNode.updateCopper(this.copperMax),o.saveData(),this.checkUnlock()},initLose:function(){this.markComplete.active=!1,this.txtTitle.string="\u54e6\u8c41\uff0c\u5c31\u5dee\u4e00\u70b9\u70b9...",this.loseNode.active=!0,this.winNode.active=!1,this.loseBtns.active=!0,o.data.goldCount<=0&&this.scheduleOnce(function(){var e=cc.instantiate(this.goldPrefab);this.node.addChild(e)}.bind(this),.3)},initChallenge:function(){if(this.copper=0,this.copperMax=10*o.level,this.shine.runAction(cc.rotateBy(4,360).repeatForever()),this.boxLevel.active=!1,this.challengeNode.active=!0,this.txtTitle.string="\u83b7\u5f97\u6311\u6218\u5956\u52b1",this.challengeBtns.active=!0,4==o.mode){var e=Math.round(100*window.btLayer.meter)/100;this.txtLevelC.string=e+"M",e>o.data.metre?(this.markKing.active=!0,this.txtHigh.string="\u65b0\u7eaa\u5f55",o.data.metre=e):(this.markKing.active=!1,this.txtHigh.string="\u6700\u4f73\u6210\u7ee9 "+o.data.metre+"M"),this.txtProgress.string="\u52c7\u6500\u9ad8\u5854  "+(o.data.metre>=20?"\u5df2\u8fbe\u5dc5\u5cf0":"\u5b8c\u6210\u5ea6"+Math.floor(o.data.metre/20*100)+"%")}else this.txtLevelC.string="\u7b2c "+o.level+" \u5173",o.level>o.data.challenge?(this.markKing.active=!0,this.txtHigh.string="\u65b0\u7eaa\u5f55",o.data.challenge=o.level):(this.markKing.active=!1,this.txtHigh.string="\u6700\u4f73\u6210\u7ee9 "+o.data.challenge),this.txtProgress.string="\u9ad8\u5206\u7ade\u8d5b  "+(o.data.challenge>=30?"\u5df2\u8fbe\u5dc5\u5cf0":"\u5b8c\u6210\u5ea6"+Math.floor(o.data.challenge/30*100)+"%");window.uiNode.updateCopper(this.copperMax),o.saveData()},nextLevel:function(){if(window.uiNode.spendEnergy()){o.level>=[85,30,30][o.mode-1]?o.level=1:o.level++,window.endLayer=null,cc.director.loadScene("main")}},retry:function(){window.uiNode.spendEnergy()&&(window.endLayer=null,cc.director.loadScene("main"))},back:function(){window.btLayer=null,window.endLayer=null,o.mode<=3?cc.director.loadScene("prepare"):cc.director.loadScene("helloworld")},double:function(){var e=function(e){this.shareGot?window.uiNode.doTip("\u53cc\u500d\u91d1\u5e01\u5df2\u9886\u53d6"):e&&!window.uiNode.showShare()||(window.uiNode.updateCopper(this.copperMax),this.shareGot=!0,o.saveData(),this.copperMax*=2)}.bind(this);o.ad||n.shareAppMessage(function(){e(!0)}.bind(this))},update:function(){this.copper<this.copperMax&&(this.copper++,this.txtCopper.string="+"+this.copper)},skip:function(){var e=function(e){e&&!window.uiNode.showShare(!0)||(null==o.data.star[o.mode-1][o.level-1]&&(o.data.star[o.mode-1].push(0),o.saveData()),this.nextLevel())}.bind(this);o.ad||n.shareAppMessage(function(){e(!0)}.bind(this))},checkUnlock:function(){for(var e=!1,t=0,i=0;i<3;i++)for(var n=o.data.star[i],s=0;s<n.length;s++)t+=n[s];o.data.star[0].length>=10&&!o.data.unlock[1]?o.data.unlock[1]=1:o.data.star[1].length>=10&&!o.data.unlock[3]?o.data.unlock[3]=1:t>=100&&!o.data.unlock[4]?o.data.unlock[4]=1:t>=150&&!o.data.unlock[2]&&(o.data.unlock[2]=1);for(var c=0;c<5;c++)if(1==o.data.unlock[c]){e=!0;break}this.markAttention.active=e},submitScore:function(e){void 0!=window.wx&&wx.getOpenDataContext().postMessage({messageType:2,MAIN_MENU_NUM:"classic",score:e})}}),cc._RF.pop()},{Game:"Game",SdkHelper:"SdkHelper"}],EnergyLayer:[function(e,t,i){"use strict";cc._RF.push(t,"d352fR1W8pI9LZ1kgEgy54O","EnergyLayer");var o=e("Game"),n=e("SdkHelper");cc.Class({extends:cc.Component,properties:{label:cc.Node,icon:cc.Node,txtCopper:cc.Node},onLoad:function(){o.ad&&o.data.fullCount[0]<2||o.data.fullCount[1]<3?(this.label.active=!0,this.icon.active=this.txtCopper.active=!1):(this.label.active=!1,this.icon.active=this.txtCopper.active=!0)},full:function(){var e=function(e){6==o.data.energy?window.uiNode.doTip("\u6d3b\u529b\u503c\u5df2\u6ee1"):e&&!window.uiNode.showShare()||(this.node.destroy(),o.data.energy=6,window.uiNode.refresh(),e&&(o.data.fullCount[1]++,o.saveData()))}.bind(this);o.ad&&o.data.fullCount[0]<2?o.data.fullCount[0]++:o.data.fullCount[1]<3?n.shareAppMessage(function(){e(!0)}.bind(this)):window.uiNode.updateCopper(-100)&&e()},close:function(){this.node.destroy()}}),cc._RF.pop()},{Game:"Game",SdkHelper:"SdkHelper"}],Friend:[function(e,t,i){"use strict";cc._RF.push(t,"a0d4fG3lH1HTKkv/LXZs3Y+","Friend"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.saved=!1},save:function(){this.saved=!0;var e=window.btLayer.friendMarks[window.btLayer.friendsSaved].position.add(cc.v2(0,582));this.node.runAction(cc.sequence(cc.scaleTo(.2,50/34),cc.moveTo(.5,e),cc.callFunc(function(){window.btLayer.addStar()}.bind(this))))}}),cc._RF.pop()},{}],Game:[function(e,t,i){"use strict";cc._RF.push(t,"c695f0rYj9JK4KCz1V2sNHB","Game");var o={mode:1,level:1,heart:2,delta:0,ad:!1,shareTime:0,leaveTime:0,vip:!1,getData:function(e){if(void 0!=window.wx)wx.getStorage({key:"scale",success:function(t){cc.log("getStorageSuccess:"+t.data),void 0!=t.data?(o.data=JSON.parse(t.data),this.checkCompatible(),e()):(this.setDataToBase(),e())}.bind(this),fail:function(){this.setDataToBase(),e()}.bind(this)});else{var t=cc.sys.localStorage.getItem("scale");void 0!=t?(o.data=JSON.parse(t),this.checkCompatible()):this.setDataToBase(),e()}},setDataToBase:function(){o.data={copper:0,energy:6,fullCount:[0,0],slowCount:[0,0],star:[[],[],[]],metre:0,challenge:0,sign:0,sound:!0,unlock:[2,0,0,0,0],wheel:0,shareCount:0,recoverTime:0,goldCount:0,version:0,time:0}},saveData:function(){var t=e("SdkHelper");o.data.time=t.getTime(),o.data.version++,void 0!=window.wx?wx.setStorage({key:"scale",data:JSON.stringify(o.data),success:function(){}}):cc.sys.localStorage.setItem("scale",JSON.stringify(o.data))},checkCompatible:function(){null==o.data.goldCount&&(o.data.goldCount=0)},checkResetDaily:function(){var t=e("SdkHelper");Math.floor(o.data.time/864e5)<Math.floor(t.getTime()/864e5)&&(o.data.fullCount=o.data.slowCount=[0,0],o.data.wheel=0,o.data.shareCount=0,o.saveData())}};t.exports=o,cc._RF.pop()},{SdkHelper:"SdkHelper"}],GoldLayer:[function(e,t,i){"use strict";cc._RF.push(t,"e0a1ake8WpKH4tCmxaddzmy","GoldLayer");var o=e("Game"),n=e("SdkHelper");cc.Class({extends:cc.Component,properties:{btnClose:cc.Node},onLoad:function(){this.node.scale=.8,this.node.runAction(cc.sequence(cc.scaleTo(.1,1.1),cc.scaleTo(.05,1)))},doGold:function(){var e=function(){o.data.goldCount=10,o.saveData(),this.node.destroy()}.bind(this);o.ad||n.shareAppMessage(function(){window.uiNode.showShare()&&e()}.bind(this))},close:function(){this.node.destroy()}}),cc._RF.pop()},{Game:"Game",SdkHelper:"SdkHelper"}],HelloWorld:[function(e,t,i){"use strict";cc._RF.push(t,"3c1c6BjeShPVLeEd+EAbaKC","HelloWorld");var o=e("Game");cc.Class({extends:cc.Component,properties:{UINodePrefab:cc.Prefab,boxMode:cc.Node,infoNode:cc.Node,btnPrev:cc.Node,btnNext:cc.Node,btnStart:cc.Node,mask:cc.Node,markCost:cc.Node,markAttention:cc.Node,vipLayerPrefab:cc.Prefab,dailyLayerPrefab:cc.Prefab,packLayerPrefab:cc.Prefab,wheelPrefab:cc.Prefab,helpPrefab:cc.Prefab,rankPrefab:cc.Prefab,hotlinePrefab:cc.Prefab},onLoad:function(){this.createUI(),this.initMode(),this.checkUnlock()},createUI:function(){var e=cc.instantiate(this.UINodePrefab);this.node.addChild(e,1e3)},initMode:function(){this.mode=o.mode-1,this.boxList=[];for(var e=[1,2,4,5,3,6,7],t=0;t<7;t++){var i=this.boxMode;t>0&&(i=cc.instantiate(this.boxMode),this.infoNode.addChild(i)),i.x=cc.winSize.width*t,i.getComponent("BoxMode").init(e[t]),this.boxList.push(i)}for(var n=0,s=0;s<7;s++)if(this.mode==e[s]-1){n=s;break}this.infoNode.x=-n*cc.winSize.width,this.checkBtn(0)},changeMode:function(e,t){for(var i=[0,1,3,4,2,5,6],o=0,n=0;n<7;n++)if(this.mode==i[n]){o=n;break}o+=parseInt(t),this.mode=i[o],this.infoNode.runAction(cc.moveBy(.3,cc.v2(-t*cc.winSize.width,0))),this.checkBtn(o)},checkBtn:function(e){this.btnPrev.active=this.mode>0,this.btnNext.active=this.mode<6,1==o.data.unlock[this.mode]?(this.btnStart.active=!1,this.btnPrev.getComponent(cc.Button).interactable=!1,this.btnNext.getComponent(cc.Button).interactable=!1,this.boxList[e].getComponent("BoxMode").doUnlock(function(){this.btnStart.active=!0,this.btnPrev.getComponent(cc.Button).interactable=!0,this.btnNext.getComponent(cc.Button).interactable=!0,o.data.unlock[this.mode]=2,o.saveData(),this.checkUnlock()}.bind(this))):this.btnStart.active=this.boxList[e].getComponent("BoxMode").unlock},startGame:function(){var e=function(){if(o.mode=this.mode+1,o.mode<=3){o.level=Math.min(o.data.star[o.mode-1].length+1,[85,30,30][o.mode-1])}else o.level=1;cc.director.loadScene("main")}.bind(this);if(o.vip)e();else if(window.uiNode.spendEnergy()){this.mask.active=!0,this.markCost.active=!0;var t=cc.spawn(cc.sequence(cc.scaleTo(.1,1.3),cc.scaleTo(.1,1)),cc.moveBy(.5,cc.v2(0,70)));this.markCost.runAction(cc.sequence(t,cc.fadeOut(.1),cc.callFunc(e)))}},doEditor:function(){cc.director.loadScene("editor")},reset:function(){(o.setDataToBase(),o.saveData(),cc.director.loadScene("helloworld"),window.wx&&wx.cloud&&window.openid)&&wx.cloud.database().collection("score").doc(window.openid+"-score").remove()},checkUnlock:function(){for(var e=!1,t=0;t<5;t++)if(1==o.data.unlock[t]){e=!0;break}this.markAttention.active=e},openVip:function(){var e=cc.instantiate(this.vipLayerPrefab);this.node.addChild(e,20)},openDaily:function(){var e=cc.instantiate(this.dailyLayerPrefab);this.node.addChild(e,20)},openPack:function(){var e=cc.instantiate(this.packLayerPrefab);this.node.addChild(e,20)},openWheel:function(){var e=cc.instantiate(this.wheelPrefab);this.node.addChild(e,20)},openHelp:function(){if(this.mode>4)window.uiNode.doTip("\u5c1a\u672a\u5f00\u653e\uff0c\u656c\u8bf7\u671f\u5f85");else{var e=cc.instantiate(this.helpPrefab);e.getComponent("HelpLayer").init(this.mode),this.node.addChild(e,20)}},openRank:function(){var e=cc.instantiate(this.rankPrefab);this.node.addChild(e,20)},openHotline:function(){var e=cc.instantiate(this.hotlinePrefab);this.node.addChild(e,20)}}),cc._RF.pop()},{Game:"Game"}],HelpLayer:[function(e,t,i){"use strict";cc._RF.push(t,"bb2198ecEZKU68UqO1Gnn2+","HelpLayer"),cc.Class({extends:cc.Component,properties:{modeNodes:[cc.Node]},init:function(e){this.modeNodes[e].active=!0},close:function(){this.node.destroy()}}),cc._RF.pop()},{}],HotlineLayer:[function(e,t,i){"use strict";cc._RF.push(t,"355f8ozdYNP6L+eTrC7z0bx","HotlineLayer"),cc.Class({extends:cc.Component,properties:{txtId:cc.Label},onLoad:function(){window.openid&&(this.txtId.string=window.openid.slice(0,-4))},copy:function(){window.wx&&window.wx.setClipboardData({data:this.txtId.string,fail:function(){window.uiNode.doTip("\u590d\u5236\u5931\u8d25")}.bind(this)})},connect:function(){window.wx&&(window.wx.openCustomerServiceConversation?window.wx.openCustomerServiceConversation({sessionFrom:window.openId}):window.uiNode.doTip("\u5f53\u524d\u5fae\u4fe1SDK\u4e0d\u652f\u6301,\u8bf7\u5347\u7ea7\u5fae\u4fe1"))},close:function(){this.node.destroy()}}),cc._RF.pop()},{}],Opening:[function(e,t,i){"use strict";cc._RF.push(t,"0d3a7lkkPZLpqDV+M1/xdSW","Opening");var o=e("Config"),n=e("Game"),s=e("SdkHelper");cc.Class({extends:cc.Component,properties:{},onLoad:function(){if(window.openingLayer=this,cc.director.getCollisionManager().enabled=!0,void 0!=window.wx){var e=wx.getOpenDataContext();window.sharedCanvas=e.canvas}if(s.initListener(),void 0!=window.wx){wx.cloud.init(),s.login(function(){window.openingLayer.login()});var t=wx.getLaunchOptionsSync();n.vip=1035==t.scene}else this.login()},login:function(){n.getData(function(){o.load(function(){s.getSync(function(){cc.director.loadScene("helloworld"),n.checkResetDaily()}.bind(this))}.bind(this))}.bind(this))}}),cc._RF.pop()},{Config:"Config",Game:"Game",SdkHelper:"SdkHelper"}],PackLayer:[function(e,t,i){"use strict";cc._RF.push(t,"ed7e7XKWhNL0LiCHpjH52W7","PackLayer");e("Game");var o=e("SdkHelper");cc.Class({extends:cc.Component,properties:{shine:cc.Node},onLoad:function(){this.shine.runAction(cc.rotateBy(4,360).repeatForever())},getMoney:function(){o.shareAppMessage(function(){window.uiNode.showShare()}.bind(this))},close:function(){this.node.destroy()}}),cc._RF.pop()},{Game:"Game",SdkHelper:"SdkHelper"}],PauseLayer:[function(e,t,i){"use strict";cc._RF.push(t,"3f277N4lCBMZJdvbhMRgrDD","PauseLayer");var o=e("Game");cc.Class({extends:cc.Component,properties:{markSound:cc.Sprite,helpPrefab:cc.Prefab},onLoad:function(){cc.loader.loadRes("Texture/UI/mark_sound"+(o.data.sound?1:2),cc.SpriteFrame,function(e,t){this.markSound.spriteFrame=t}.bind(this))},continue:function(){this.node.destroy();for(var e=window.playgound.balls,t=0;t<e.length;t++)e[t].isValid&&(e[t].getComponent("Ball").rolling=!0)},back:function(){window.btLayer=null,o.mode<=3?cc.director.loadScene("prepare"):cc.director.loadScene("helloworld")},retry:function(){window.uiNode.spendEnergy()&&cc.director.loadScene("main")},soundSetting:function(){o.data.sound=!o.data.sound,cc.loader.loadRes("Texture/UI/mark_sound"+(o.data.sound?1:2),cc.SpriteFrame,function(e,t){this.markSound.spriteFrame=t}.bind(this))},help:function(){var e=cc.instantiate(this.helpPrefab);e.getComponent("HelpLayer").init(o.mode-1),this.node.addChild(e,20)}}),cc._RF.pop()},{Game:"Game"}],PlayGound:[function(e,t,i){"use strict";cc._RF.push(t,"0ee2epUJOxOI4tyzz/z4+nl","PlayGound");var o=e("Game"),n=e("Config");cc.Class({extends:cc.Component,properties:{graphics:[cc.Graphics],graphicsBase:cc.Graphics,graphicsLine:[cc.Graphics],graphicsNode:cc.Node,colliderPrefab:cc.Prefab,ballPrefab:cc.Prefab,friendPrefab:cc.Prefab,graphicsThrons:[cc.Graphics],scissorPrefab:cc.Prefab,imageMemory:cc.Sprite,round:cc.Node,heart:cc.Animation},init:function(){if(window.playgound=this,this.width=680,o.mode<=3){this.cfg=n.get(["cfg_classic","cfg_memory","cfg_three"][o.mode-1],o.level)}else 4==o.mode&&(this.width=640);if(this.freeze=!1,2==o.mode){this.points=[];for(var e=this.cfg.shapePos.slice(1,-1).split(")("),t=0;t<e.length;t++){var i=e[t].split(";"),s=cc.v2(parseInt(i[0]),parseInt(i[1]));this.points.push(s)}}else this.points=[cc.v2(-this.width/2,340),cc.v2(-this.width/2,-340),cc.v2(this.width/2,-340),cc.v2(this.width/2,340)];this.refreshColor(),this.draw(),this.drawBase(),this.createColliders(),this.createFriend(),this.createBall(),4==o.mode&&this.createThron()},draw:function(){for(var e=0;e<this.graphics.length;e++){var t=this.graphics[e];t.clear(),t.moveTo(this.points[0].x,this.points[0].y);for(var i=1;i<this.points.length;i++)t.lineTo(this.points[i].x,this.points[i].y);t.close(),t.stroke(),0==e&&t.fill()}},refreshColor:function(){var e=["#C07078","#BE8D67","#F0D365","#5DA469","#4381A6","#847EA8"][Math.floor(6*Math.random())];this.graphics[0].fillColor=cc.color().fromHEX(2==o.mode?e+"E6":e),this.graphicsBase.fillColor=cc.color().fromHEX(e+"64")},drawBase:function(){if(2==o.mode){var e=[cc.v2(),cc.v2(),cc.v2(),cc.v2(0,20),cc.v2(),cc.v2(),cc.v2(0,-30),cc.v2(),cc.v2(0,20),cc.v2(0,-30),cc.v2(),cc.v2(),cc.v2(),cc.v2(-20,-10),cc.v2(),cc.v2(0,-5),cc.v2(),cc.v2(),cc.v2(),cc.v2(0,15),cc.v2(-10,0),cc.v2(),cc.v2(),cc.v2(0,-20),cc.v2(),cc.v2(0,-10),cc.v2(0,20),cc.v2(0,30),cc.v2(),cc.v2()];this.imageMemory.node.position=e[o.level-1],cc.loader.loadRes("Texture/memory/"+o.level,cc.SpriteFrame,function(e,t){this.imageMemory.spriteFrame=t}.bind(this))}else{var t=this.graphicsBase;t.clear(),t.moveTo(this.points[0].x,this.points[0].y);for(var i=1;i<this.points.length;i++)t.lineTo(this.points[i].x,this.points[i].y);t.close(),t.fill()}},createBall:function(){this.balls=[];var e=[];e=5==o.mode?[1]:4==o.mode?[Math.floor(8*Math.random())+1,Math.floor(8*Math.random())+1]:this.cfg.monsterNum.split(";");for(var t=[17,17,17,17,20,23,26,29],i=0;i<e.length;i++){var n=cc.instantiate(this.ballPrefab);n.getComponent("Ball").init(parseInt(e[i])),this.node.addChild(n),this.balls.push(n);for(var s=null,c=t[parseInt(e[i])-1];!s;){for(var a=cc.v2(Math.random()*(this.width-40)-(this.width-40)/2,640*Math.random()-320),r=[cc.v2(-c,c),cc.v2(c,c),cc.v2(c,-c),cc.v2(-c,-c)],d=!1,h=0;h<4;h++){var l=a.add(r[h]),p=a.add(r[3==h?0:h+1]);if(cc.Intersection.linePolygon(l,p,this.points)){d=!0;break}}cc.Intersection.pointInPolygon(a,this.points)&&!d&&(s=a)}n.position=s}},createFriend:function(){if(this.friends=[],this.friendMarks=[],o.mode<=3){var e=this.cfg.friendsNum,t=[];if(o.mode<3)for(var i=this.cfg.friendsPos.slice(1,-1).split(")("),n=0;n<i.length;n++){var s=i[n].split(";"),c=cc.v2(parseInt(s[0]),parseInt(s[1]));t.push(c)}for(var a=0;a<e;a++){var r=cc.instantiate(this.friendPrefab);this.node.addChild(r),this.friends.push(r),r.position=3==o.mode?cc.v2(640*Math.random()-320,640*Math.random()-320):t[a]}}},startSlice:function(e,t){this.pMid=t,this.pCrossList=e,this.scissorsList=[],this.marksList=[];for(var i=0;i<2;i++){var o=this.pCrossList[i].sub(this.pMid),n=cc.instantiate(this.colliderPrefab);n.position=this.pMid,this.node.addChild(n),this.scissorsList.push(n);var s=cc.instantiate(this.scissorPrefab);s.position=this.pMid,this.node.addChild(s),this.marksList.push(s),o.y>0||(o.y<0?n.rotation=s.rotation=180:o.x>0?n.rotation=s.rotation=90:n.rotation=s.rotation=-90)}this.round.active=!0,this.round.position=this.pMid,window.btLayer.touchabled=!1,window.btLayer.slicer.node.scale=1,this.schedule(this.updateSlicer,0)},updateSlicer:function(){for(var e=0,t=0;t<2;t++){var i=5*this.scissorsList[t].scaleY,n=this.pCrossList[t].sub(this.pMid).mag();if(i>=n)i=n,e++,this.marksList[t].isValid&&(this.marksList[t].position=this.pCrossList[t],this.marksList[t].getComponent("Scissor").complete());else{var s=o.data.goldCount>0?8:5;i+=s;var c=this.marksList[t];0==c.rotation?c.y+=s:90==c.rotation?c.x+=s:180==c.rotation?c.y-=s:c.x-=s}this.scissorsList[t].scaleY=i/5}if(e>=2){for(var a=0;a<2;a++)this.scissorsList[a].getComponent("Collider").complete(),this.colliders.push(this.scissorsList[a]);this.round.active=!1,o.data.goldCount>0&&o.data.goldCount--,this.unschedule(this.updateSlicer),this.splitPoints(),window.btLayer.slicer.node.position=window.btLayer.selectPos,3==o.mode?window.btLayer.checkThree():window.btLayer.resetSlicer()}},insertTemp:function(e,t){for(var i=0;i<this.pTempList.length;i++)if(this.pTempList[i]===t){this.pTempList.splice(i+1,0,e);break}},splitPoints:function(){for(var e=[[],[]],t=0,i=0;i<this.pTempList.length;i++){var o=this.pTempList[i];o===this.pCrossList[0]||o===this.pCrossList[1]?(e[0].push(o),e[1].push(o),window.btLayer.type>1&&e[t].push(this.pMid),t=1-t):e[t].push(o)}this.selectPolygon(e)},selectPolygon:function(e){for(var t=[0,0],i=[[],[]],n=0;n<2;n++){for(var s=e[n],c=0;c<this.width/10+1;c++)for(var a=0;a<69;a++){var r=cc.v2(-this.width/2+10*c,10*a-340);cc.Intersection.pointInPolygon(r,s)&&t[n]++}for(var d=0;d<this.balls.length;d++)this.balls[d].isValid&&cc.Intersection.pointInPolygon(this.balls[d].position,s)&&i[n].push(this.balls[d])}var h=0;if(4==o.mode){for(var l=0;l<e[1].length;l++)if(340==e[1][l].y){h=1;break}}else i[0].length==i[1].length?t[0]<t[1]&&(h=1):i[0].length<i[1].length&&(h=1);this.points=e[h],this.draw(),window.btLayer.updateStar(t[h]),this.checkFriends(e[1-h]);for(var p=0;p<i[1-h].length;p++){var u=i[1-h][p];4==o.mode?u.active=!1:u.destroy()}if(4==o.mode&&this.updateTower(),this.freeze){this.freeze=!1;for(var f=0;f<this.balls.length;f++)this.balls[f].isValid&&(this.balls[f].getComponent("Ball").freeze=!1);window.btLayer.checkSlowUse()}},createColliders:function(){this.colliders=[];for(var e=0;e<this.points.length;e++){var t=this.points[e],i=(this.points[e+1]?this.points[e+1]:this.points[0]).sub(t),o=cc.instantiate(this.colliderPrefab);o.position=t,o.scaleY=i.mag()/5,this.node.addChild(o),this.colliders.push(o),o.getComponent("Collider").complete(),i.y>0||(i.y<0?o.rotation=180:i.x>0?o.rotation=90:o.rotation=-90)}},createThron:function(){for(var e=0;e<10;e++)for(var t=cc.v2(64*e-288,308),i=0;i<2;i++){var o=cc.instantiate(this.colliderPrefab);o.position=t,o.scaleY=9.6,this.node.addChild(o),o.getComponent("Collider").complete(),o.rotation=0==i?-45:45}for(var n=0;n<2;n++){(a=this.graphicsThrons[n]).moveTo(-320,350),a.lineTo(-320,340);for(var s=0;s<10;s++){var c=cc.v2(64*s-288,308);a.lineTo(c.x,c.y),a.lineTo(c.x+32,340)}a.lineTo(320,350),a.close(),a.fill()}var a;(a=this.graphicsLine[0]).moveTo(-320,350),a.lineTo(320,350),a.stroke(),(a=this.graphicsLine[1]).moveTo(-320,346),a.lineTo(320,346),a.stroke()},resizeSquare:function(){for(var e=340,t=340,i=-340,o=-340,n=0;n<this.points.length;n++){var s=this.points[n];e=Math.min(e,s.x),t=Math.min(t,s.y),i=Math.max(i,s.x),o=Math.max(o,s.y)}var c=1,a=cc.v2(),r=cc.v2();if(i-e>o-t){c=680/(i-e);for(var d=0;d<this.points.length;d++){(s=this.points[d]).x=Math.round((s.x-e)*c-340),s.y=Math.round((s.y-(o+t)/2)*c)}a=cc.v2(-340-e*c,-(o+t)/2*c),r=cc.v2((this.balls[0].x-e)*c-340,(this.balls[0].y-(o+t)/2)*c)}else{c=680/(o-t);for(var h=0;h<this.points.length;h++){(s=this.points[h]).x=Math.round((s.x-(i+e)/2)*c),s.y=Math.round((s.y-t)*c-340)}a=cc.v2(-(i+e)/2*c,-340-t*c),r=cc.v2((this.balls[0].x-(i+e)/2)*c,(this.balls[0].y-t)*c-340)}for(var l=0,p=0;p<69;p++)for(var u=0;u<69;u++){var f=cc.v2(10*p-340,10*u-340);cc.Intersection.pointInPolygon(f,this.points)&&l++}window.btLayer.total=l;for(var v=0;v<this.colliders.length;v++)this.colliders[v].destroy();this.graphicsBase.clear(),this.graphicsNode.runAction(cc.sequence(cc.spawn(cc.scaleTo(.5,c),cc.moveTo(.5,a)),cc.callFunc(function(){this.graphicsNode.position=cc.v2(),this.graphicsNode.scale=1,this.refreshColor(),this.draw(),this.drawBase(),this.createColliders(),window.btLayer.strip.progress=0,window.btLayer.txtPecent.string="0%"}.bind(this)))),this.balls[0].getComponent("Ball").rolling=!1,this.balls[0].runAction(cc.sequence(cc.moveTo(.5,r),cc.callFunc(function(){var e=360*Math.random();this.balls[0].getComponent("Ball").velocity=cc.v2(Math.sin(e),Math.cos(e)),this.balls[0].getComponent("Ball").rolling=!0}.bind(this)))),window.btLayer.gotoNextLevel()},speedDown:function(){if(!this.freeze){this.freeze=!0;for(var e=0;e<this.balls.length;e++)this.balls[e].isValid&&(this.balls[e].getComponent("Ball").freeze=!0)}},updateTower:function(){for(var e=this,t=340,i=0;i<this.points.length;i++)this.points[i].y<t&&(t=this.points[i].y);if(t>-340){for(var n=t+340,s=0;s<this.points.length;s++)this.points[s].y<340&&(this.points[s].y-=n);this.graphicsNode.y+=n;for(var c=0;c<this.colliders.length;c++)this.colliders[c].destroy();this.refreshColor(),this.draw(),this.graphicsBase.clear(),this.createColliders(),window.btLayer.addMeter(n),o.level++,this.graphicsNode.runAction(cc.sequence(cc.moveTo(.4,cc.v2(0,0)),cc.moveBy(.05,cc.v2(0,30)),cc.moveTo(.05,cc.v2(0,0)),cc.callFunc(function(){this.drawBase(),this.addBall()}.bind(this))));for(var a=function(t){var i=e.balls[t];i.isValid&&i.active&&(i.getComponent("Ball").rolling=!1,i.runAction(cc.sequence(cc.moveBy(.5,cc.v2(0,-n)),cc.callFunc(function(){var e=360*Math.random();i.getComponent("Ball").velocity=cc.v2(Math.sin(e),Math.cos(e)),i.getComponent("Ball").rolling=!0}.bind(e)))))},r=0;r<this.balls.length;r++)a(r)}else this.addBall()},addBall:function(){for(var e=0,t=0;t<this.balls.length;t++){var i=this.balls[t];if(i.isValid&&(!i.active||!cc.Intersection.pointInPolygon(i.position,this.points))){i.active=!0;for(var o=null;!o;){var n=cc.v2(600*Math.random()-300,500*Math.random()-230);cc.Intersection.pointInPolygon(n,this.points)&&(o=n)}i.position=o,i.getComponent("Ball").init(Math.floor(8*Math.random())+1),e++}}window.btLayer.addPiece(e)},checkFriends:function(e){for(var t=0;t<this.friends.length;t++)if(this.friends[t].isValid)for(var i=[cc.v2(-17,-17),cc.v2(-17,17),cc.v2(17,17),cc.v2(17,-17)],o=0;o<4;o++)if(cc.Intersection.pointInPolygon(this.friends[t].position.add(i[o]),e)){window.btLayer.addStar(this.friends[t].position),this.friends[t].destroy();break}},heartBreak:function(e){this.heart.node.position=e,this.heart.node.opacity=255,this.heart.play("heart"),this.heart.node.stopAllActions(),this.heart.node.runAction(cc.sequence(cc.delayTime(.35),cc.fadeOut(.05)))}}),cc._RF.pop()},{Config:"Config",Game:"Game"}],PlayLayer:[function(e,t,i){"use strict";cc._RF.push(t,"32a9dKicsVIF4FeRuQq0DvJ","PlayLayer");var o=e("Game"),n=e("Config"),s=e("SdkHelper");cc.Class({extends:cc.Component,properties:{slicers:[cc.Sprite],strip:cc.ProgressBar,txtPecent:cc.Label,starList:[cc.Node],pauseLayerPrefab:cc.Prefab,endLayerPrefab:cc.Prefab,starNode:cc.Node,txtLevel:cc.Label,txtLevel2:cc.Label,txtHeart:cc.Label,friendsNode:cc.Node,friend:cc.Node,reviveLayerPrefab:cc.Prefab,UINodePrefab:cc.Prefab,boxRuler:cc.Node,playGound:cc.Node,rulers:[cc.Node],pieces:[cc.Node],infoNode:cc.Node,boxPiece:cc.Node,txtCosts:[cc.Label],iconSlow:cc.Node,txtUse:cc.Label,btnSlow:cc.Node,btnSlow2:cc.Node,txtGuide:cc.Label},onLoad:function(){if(window.btLayer=this,this.width=680,o.mode<=3){this.cfg=n.get(["cfg_classic","cfg_memory","cfg_three"][o.mode-1],o.level)}else if(4==o.mode){this.width=640,this.friendsNode.active=!1,this.starNode.active=!1,this.strip.node.active=!1,this.meter=1,this.txtLevel.string=this.txtLevel2.string="1M",this.piece=0,this.boxRuler.active=!0,this.playGound.x=30,this.markRuler=0,this.infoNode.y=480,this.boxPiece.active=!0;for(var e=0;e<4;e++)this.rulers[e].getChildren()[0].getComponent(cc.Label).string=this.markRuler,this.markRuler+=.5}else 5==o.mode&&(this.friendsNode.active=!1,this.starNode.active=!1,this.txtLevel.string=this.txtLevel2.string=1);this.friendsSaved=0,this.heart=2,this.types=[],this.revived=!1,this.gameover=!1,this.star=0,this.costs=[200,100],this.refreshCost(),this.createUI(),this.refreshStrip(),this.createFriendMaks(),this.playGound.getComponent("PlayGound").init(),this.checkSlowUse();for(var t=0;t<3;t++)0==t||3==o.mode?(this.slicers[t].node.zIndex=10,this.slicers[t].node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.slicers[t].node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.slicers[t].node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.slicers[t].node.on(cc.Node.EventType.TOUCH_END,this.touchCancel,this),this.resetSlicer(t)):this.slicers[t].node.active=!1;if(2==o.mode){this.total=0;for(var i=0;i<69;i++)for(var s=0;s<69;s++){var c=cc.v2(10*i-340,10*s-340);cc.Intersection.pointInPolygon(c,window.playgound.points)&&this.total++}}else this.total=69*(this.width/10+1);1==o.mode&&o.level<=3&&(this.txtGuide.string="\u62d6\u4e0a\u53bb\u88c1\u526a\u7eb8\u5f20\uff0c\u907f\u5f00\u5c0f\u602a\u517d")},createFriendMaks:function(){if(this.friendMarks=[],o.mode<=3)for(var e=this.cfg.friendsNum,t=0;t<e;t++){var i=this.friend;t>0&&(i=cc.instantiate(this.friend),this.friendsNode.addChild(i)),i.position=cc.v2(-(e-1)/2*60+60*t,0),this.friendMarks.push(i)}},refreshStrip:function(){if(o.mode<=3)for(var e=this.cfg.starRequire.split(";"),t=0;t<3;t++)this.starList[t].x=parseFloat(e[t])/parseFloat(e[2])*620-310},touchStart:function(e){if(this.touchabled){this.slicer=e.target.getComponent(cc.Sprite),this.slicer.node.opacity=190,this.slicer.node.scale=1.2,this.selectPos=this.slicer.node.position;for(var t=0,i=0;i<3;i++)if(this.slicer==this.slicers[i]){t=i;break}this.type=this.types[t]}},touchMove:function(e){if(this.touchabled){this.slicer.node.position=e.touch._point.sub(cc.v2(cc.winSize.width/2,cc.winSize.height/2));var t=this.slicer.node.y+389,i=Math.min(Math.max(0,3*t),250);this.slicer.node.y+=i}},touchCancel:function(e){if(this.touchabled){var t=cc.v2(Math.round(this.slicer.node.x-(4==o.mode?30:0)),Math.round(this.slicer.node.y)-52);if(this.points=window.playgound.points,!cc.Intersection.pointInPolygon(t,this.points)||4==o.mode&&t.y>308)return this.slicer.node.position=this.selectPos,this.slicer.node.opacity=255,void(this.slicer.node.scale=1);this.slicer.node.runAction(cc.spawn(cc.scaleTo(.3,.8),cc.fadeOut(.5)));var i=[cc.v2(t.x,340),cc.v2(this.width/2,t.y),cc.v2(t.x,-340),cc.v2(-this.width/2,t.y)];window.playgound.pTempList=this.points.concat();for(var n=[[1,3],[0,2],[0,3],[0,1],[1,2],[2,3]][this.type],s=[],c=0;c<2;c++){for(var a=n[c],r=i[a],d=680,h=cc.v2(),l=cc.v2(),p=0;p<this.points.length;p++){var u=this.points[p],f=this.points[p+1]?this.points[p+1]:this.points[0];if(cc.Intersection.lineLine(t,r,u,f)){var v=cc.v2();(v=a%2==0?cc.v2(t.x,u.y):cc.v2(u.x,t.y)).sub(t).mag()<d&&(d=v.sub(t).mag(),h=u,l=v)}}window.playgound.insertTemp(l,h),s.push(l)}window.playgound.startSlice(s,t)}},touchEnd:function(){this.type>1?(this.type++,this.type>5&&(this.type=2)):this.type=1-this.type,cc.loader.loadRes("Texture/UI/slicer"+this.type,cc.SpriteFrame,function(e,t){this.slicer.spriteFrame=t}.bind(this))},resetSlicer:function(e){var t=null!=e?e:0;this.touchabled=!0;var i=0;if(4==o.mode){i=[0,4,4,5,5][Math.floor(5*Math.random())]}else i=Math.floor(6*Math.random());this.refreshClicer(t,i)},refreshClicer:function(e,t){cc.loader.loadRes("Texture/UI/"+(o.data.goldCount>0?"image_gold":"image_slicer")+(t<2?1:2),cc.SpriteFrame,function(t,i){this.slicers[e]&&(this.slicers[e].spriteFrame=i)}.bind(this));this.slicers[e].node.stopAllActions(),this.slicers[e].node.rotation=[0,90,0,90,180,270][t],this.slicers[e].node.opacity=255,this.slicers[e].node.scale=1,this.types[e]=t},loseHeart:function(e){window.playgound.unschedule(window.playgound.updateSlicer);for(var t=0;t<2;t++)window.playgound.scissorsList[t].destroy(),window.playgound.marksList[t].isValid&&window.playgound.marksList[t].destroy();window.playgound.round.active=!1,o.data.goldCount>0&&o.data.goldCount--,window.playgound.heartBreak(e),this.slicer.node.stopAllActions(),this.slicer.node.position=this.selectPos,this.slicer.node.opacity=255,this.slicer.node.scale=1,3==o.mode?this.checkThree():(this.resetSlicer(),this.heart--,this.txtHeart.string=this.heart,this.heart<=0&&this.lose()),window.wx&&wx.vibrateLong()},openEnding:function(e){if(!window.endLayer){var t=cc.instantiate(this.endLayerPrefab);window.endLayer=t,this.scheduleOnce(function(){t.getComponent("EndLayer").init(e),this.node.addChild(t,20)}.bind(this),.3)}},updateStar:function(e){var t=this,i=.27+.03*o.level,n=(this.total-e)/this.total;if(o.mode<=3){var s=this.cfg.starRequire.split(";");i=parseFloat(s[2]);for(var c=function(e){if(n>=parseFloat(s[e])&&e+1>t.star){t.star++;var o=t.starList[e].getChildren()[0];o.runAction(cc.sequence(cc.delayTime(100*(parseFloat(s[e])/i-t.strip.progress)/60),cc.callFunc(function(){o.opacity=255,o.scale=1,cc.loader.loadRes("Texture/UI/mark_star2",cc.SpriteFrame,function(t,i){this.starList[e]&&(this.starList[e].getComponent(cc.Sprite).spriteFrame=i)}.bind(this))}.bind(t)),cc.spawn(cc.rotateBy(.3,144),cc.scaleTo(.2,1.5)),cc.delayTime(.1),cc.scaleTo(.2,.7).easing(cc.easeIn(2))))}},a=0;a<3;a++)c(a)}else 5==o.mode&&n>=i&&window.playgound.resizeSquare();this.progress=n/i,this.unschedule(this.updateProgress),this.schedule(this.updateProgress,0)},updateProgress:function(){this.strip.progress+=.01,this.strip.progress>this.progress&&(this.strip.progress=this.progress,this.unschedule(this.updateProgress))},addStar:function(e){this.friendsSaved++;var t=this.cfg.friendsNum;this.friendsSaved>=t&&(this.gameover=!0);var i=this.friendsSaved-1,o=this.friendMarks[i],n=o.getChildren()[0],s=n.position;n.active=!0,n.position=e.add(cc.v2(0-o.x,-478)),n.scale=.68,n.runAction(cc.sequence(cc.scaleTo(.2,1),cc.moveTo(.4,s),cc.callFunc(function(){this.friendsSaved>=t&&this.openEnding(!0)}.bind(this))))},gotoNextLevel:function(){o.level++,this.txtLevel.string=this.txtLevel2.string=o.level,this.txtLevel2.node.position=cc.v2(0,-528),this.txtLevel2.node.scale=10,this.txtLevel2.node.opacity=150,this.txtLevel2.node.runAction(cc.spawn(cc.scaleTo(.5,1),cc.moveTo(.5,cc.v2(2,10),cc.fadeIn(.5))))},change:function(){if(window.uiNode.updateCopper(-this.costs[1])){for(var e=0;e<3;e++)if(this.slicers[e].node.active){for(var t=this.types[e];t==this.types[e];)if(4==o.mode){t=[0,4,4,5,5][Math.floor(5*Math.random())]}else t=Math.floor(6*Math.random());this.refreshClicer(e,t)}this.costs[1]+=100,this.refreshCost(),o.saveData()}},speedDown:function(){var e=function(){window.playgound.speedDown(),this.refreshCost(),o.saveData(),this.checkSlowUse()}.bind(this);o.ad&&o.data.slowCount[0]<3?o.data.slowCount[0]++:o.data.slowCount[1]<4?s.shareAppMessage(function(){window.playgound.freeze||window.uiNode.showShare()&&(o.data.slowCount[1]++,e())}.bind(this)):window.playgound.freeze||window.uiNode.updateCopper(-200)&&e()},stop:function(){var e=cc.instantiate(this.pauseLayerPrefab);this.node.addChild(e,20);for(var t=window.playgound.balls,i=0;i<t.length;i++)t[i].isValid&&(t[i].getComponent("Ball").rolling=!1)},checkThree:function(){if(this.slicer.node.active=!1,this.touchabled=!0,!this.gameover){for(var e=0,t=0;t<3;t++)this.slicers[t].node.active&&e++;e<=0?this.lose():this.txtGuide.string=1==e?"\u6ce8\u610f\uff0c\u4ec5\u5269\u4e0b\u4e00\u6b21\u526a\u88c1\u673a\u4f1a":""}},lose:function(){if(!this.gameover)if(this.gameover=!0,this.revived)this.openEnding(!1);else{var e=cc.instantiate(this.reviveLayerPrefab);this.node.addChild(e,20)}},addMeter:function(e){var t=this;this.meter+=e/680,this.txtLevel.string=this.txtLevel2.string=Math.round(100*this.meter)/100+"M";for(var i=function(i){var o=t.rulers[i];o.runAction(cc.sequence(cc.moveBy(.4,cc.v2(0,-e)),cc.moveBy(.05,cc.v2(0,30)),cc.moveBy(.05,cc.v2(0,-30)),cc.callFunc(function(){o.y<=-640&&(o.y+=1336,o.getChildren()[0].getComponent(cc.Label).string=this.markRuler,this.markRuler+=.5)}.bind(t))))},o=0;o<4;o++)i(o)},addPiece:function(e){for(var t=this,i=function(i){t.piece++,t.pieces[t.piece>3?0:t.piece-1].runAction(cc.sequence(cc.delayTime(.35*i),cc.fadeIn(0),cc.scaleTo(0,2),cc.scaleTo(.3,1).easing(cc.easeIn(2)),cc.callFunc(function(){if(e>0&&3==this.piece&&0==i);else if(this.piece>=3){this.piece-=3,this.heart++,this.txtHeart.string=this.heart;for(var t=0;t<3;t++)this.pieces[t].opacity=0}}.bind(t))))},o=0;o<e;o++){i(o)}},revive:function(){if(this.revived=!0,this.heart=2,this.txtHeart.string=2,this.gameover=!1,3==o.mode){for(var e=0;e<3;e++)this.slicers[e].node.active=!0,this.resetSlicer(e);this.txtGuide.string=""}else this.resetSlicer()},createUI:function(){var e=cc.instantiate(this.UINodePrefab);this.node.addChild(e,1e3)},refreshCost:function(){for(var e=0;e<2;e++)this.txtCosts[e].string=this.costs[e],this.txtCosts[e].node.color=o.data.copper>=this.costs[e]?cc.color(98,98,98):cc.Color.RED},checkSlowUse:function(){window.playgound.freeze?(this.btnSlow2.active=!0,this.btnSlow.active=!1,this.txtUse.string="\u5df2\u6fc0\u6d3b"):(this.btnSlow2.active=!1,this.btnSlow.active=!0,o.ad&&o.data.slowCount[0]<3||o.data.slowCount[1]<4?(this.txtUse.string="\u4f7f\u7528",this.iconSlow.active=!1):(this.txtUse.string="",this.iconSlow.active=!0,this.iconSlow.getChildren()[0].color=o.data.copper>=200?cc.color(98,98,98):cc.Color.RED))}}),cc._RF.pop()},{Config:"Config",Game:"Game",SdkHelper:"SdkHelper"}],Prepare:[function(e,t,i){"use strict";cc._RF.push(t,"807924B+/NFNoJMOgJ1ruNO","Prepare");var o=e("Game");cc.Class({extends:cc.Component,properties:{content:cc.Node,UINodePrefab:cc.Prefab,btnPrefab:cc.Prefab,txtProgress:cc.Label,markAttention:cc.Node},onLoad:function(){this.createUI(),this.initContent(),this.checkUnlock()},initContent:function(){for(var e=[85,30,30],t=0;t<e[o.mode-1];t++){var i=cc.instantiate(this.btnPrefab);i.position=cc.v2(t%4*176-264,-100-220*Math.floor(t/4)),i.getComponent("BtnLevel").init(t),this.content.addChild(i)}this.content.height=Math.max(900,20+220*Math.ceil(e[o.mode-1]/4)),this.txtProgress.string=o.data.star[o.mode-1].length+"/"+e[o.mode-1]},back:function(){cc.director.loadScene("helloworld")},createUI:function(){var e=cc.instantiate(this.UINodePrefab);this.node.addChild(e,1e3)},checkUnlock:function(){for(var e=!1,t=0;t<5;t++)if(1==o.data.unlock[t]){e=!0;break}this.markAttention.active=e}}),cc._RF.pop()},{Game:"Game"}],RankLayer:[function(e,t,i){"use strict";cc._RF.push(t,"2f2d71zgIpMTqeAdWKCl3hx","RankLayer");var o=e("SdkHelper");cc.Class({extends:cc.Component,properties:{sprite:cc.WXSubContextView},onLoad:function(){this.sprite.enabled=!1,this.drawRank(0)},share:function(){o.shareAppMessage()},changePage:function(e,t){this.drawRank(t)},close:function(){this.node.destroy()},drawRank:function(e){void 0!=window.wx&&(wx.getOpenDataContext().postMessage({messageType:1,MAIN_MENU_NUM:"classic",page:parseInt(e)}),this.unscheduleAllCallbacks(),this.updateSubDomainCanvas(),this.schedule(this.updateSubDomainCanvas,.1,15))},updateSubDomainCanvas:function(){this.sprite.update()}}),cc._RF.pop()},{SdkHelper:"SdkHelper"}],ReviveLayer:[function(e,t,i){"use strict";cc._RF.push(t,"0483cI1cPhMkpz244nePWEt","ReviveLayer");var o=e("Game"),n=e("SdkHelper");cc.Class({extends:cc.Component,properties:{txtTime:cc.Label,box:cc.Node},onLoad:function(){this.time=6,this.schedule(this.updateTime,1),this.box.runAction(cc.sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1)).repeatForever())},updateTime:function(){this.time--,this.txtTime.string=this.time,this.time<=0&&this.skip()},revive:function(){o.ad||n.shareAppMessage(function(){window.uiNode.showShare()&&(this.node.destroy(),window.btLayer.revive())}.bind(this))},skip:function(){this.node.destroy(),window.btLayer.openEnding(!1)}}),cc._RF.pop()},{Game:"Game",SdkHelper:"SdkHelper"}],Scissor:[function(e,t,i){"use strict";cc._RF.push(t,"b8a30RJLaNMqpls/FRdWxfD","Scissor"),cc.Class({extends:cc.Component,properties:{scissor:cc.Node,round:cc.Node},onLoad:function(){this.completed=!1},complete:function(){this.completed||(this.completed=!0,this.scissor.active=!1,this.round.active=!0,this.round.scale=.1,this.round.runAction(cc.sequence(cc.spawn(cc.scaleTo(.3,1),cc.fadeOut(.3)),cc.callFunc(function(){this.node.destroy()}.bind(this)))))}}),cc._RF.pop()},{}],SdkHelper:[function(e,t,i){"use strict";cc._RF.push(t,"7ea11u0rxpOnK+/KSJNlgLH","SdkHelper");var o=e("Game"),n=e("Utils"),s={initListener:function(){void 0!=window.wx&&(wx.showShareMenu(),wx.onShareAppMessage(function(){return{title:"200+\u597d\u53cb\u90fd\u5728\u73a9\u7684\u7403\u7403\u6e38\u620f\uff0c\u4e00\u8d77\u5f00\u5fc3\u4e00\u4e0b",imageUrl:n.getMd5Url("resources/Texture/share1.jpg"),query:window.openid}}),wx.onShow(function(e){o.shareTime>0&&(o.shareFunc&&(s.getTime()-o.shareTime>2e3?o.shareFunc():window.uiNode.doTip("\u5206\u4eab\u5931\u8d25\uff0c\u9700\u8981 \u5206\u4eab\u5230\u7fa4 \u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6~")),o.shareTime=0);var t=s.getTime()-o.leaveTime;t<0||t>36e6?(window.dailyLayer&&window.dailyLayer.close(),wx.cloud.callFunction({name:"getTime",success:function(e){o.delta=e.result.time-Date.now(),o.checkResetDaily()},fail:function(e){console.error("\u83b7\u53d6\u65f6\u95f4\u5931\u8d25",e),o.checkResetDaily()}})):o.checkResetDaily()}),wx.onHide(function(){o.leaveTime=s.getTime(),s.submitSync()}),wx.onAudioInterruptionEnd(function(){}))},shareAppMessage:function(e){if(void 0!=window.wx){o.shareTime=s.getTime(),o.shareFunc=e,wx.shareAppMessage({title:"200+\u597d\u53cb\u90fd\u5728\u73a9\u7684\u7403\u7403\u6e38\u620f\uff0c\u4e00\u8d77\u5f00\u5fc3\u4e00\u4e0b",imageUrl:n.getMd5Url("resources/Texture/share1.jpg"),query:window.openid})}else e&&e()},login:function(e){wx.cloud.callFunction({name:"login",success:function(t){window.openid=t.result.openid,o.delta=t.result.time-Date.now(),e()},fail:function(t){console.error("get openid failed with error",t),e()}})},getPlatForm:function(){void 0!=window.wx&&wx.getSystemInfo({success:function(e){window.platform=e.platform},fail:function(e){}})},playMusic:function(e){void 0!=window.wx&&o.data.sound&&(window.music||(window.music=window.wx.createInnerAudioContext(),window.music.loop=!0),window.music.src=e,window.music.play())},playEffect:function(e){void 0!=window.wx&&o.data.sound&&(window.effect||(window.effect=window.wx.createInnerAudioContext(),window.effect.loop=!1),window.effect.src=e,window.effect.play())},updateVolume:function(){void 0!=window.wx&&(o.data.sound?s.playMusic(n.getMd5Url("resources/Sound/main.mp3")):(window.music&&window.music.stop(),window.effect&&window.effect.stop()))},getSync:function(e){void 0!=window.wx&&window.openid?wx.cloud.database().collection("score").doc(window.openid+"-score").get().then(function(t){console.log("\u83b7\u53d6\u540c\u6b65\u6570\u636e\u6210\u529f",t);var i=JSON.parse(t.data.score);i.version>o.data.version&&(o.data.copper=parseInt(i.copper),o.data.star=i.star,o.data.metre=i.meter,o.data.challenge=i.challenge,o.data.version=i.version,o.data.sign=i.sign,o.data.wheel=i.wheel),e()}).catch(function(t){console.log("\u83b7\u53d6\u540c\u6b65\u6570\u636e\u5931\u8d25",t),e()}):e()},submitSync:function(){if(void 0!=window.wx&&window.openid&&o.data.version>=20){var e={copper:o.data.copper,star:o.data.star,meter:o.data.metre,challenge:o.data.challenge,version:o.data.version,sign:o.data.sign,wheel:o.data.wheel};wx.cloud.callFunction({name:"uploadScore",data:{score:JSON.stringify(e)},success:function(e){console.log("\u540c\u6b65\u6570\u636e\u6210\u529f",e)},fail:function(e){console.error("\u540c\u6b65\u6570\u636e\u5931\u8d25",e)}})}},getTime:function(){return Date.now()+o.delta}};t.exports=s,cc._RF.pop()},{Game:"Game",Utils:"Utils"}],ShortageLayer:[function(e,t,i){"use strict";cc._RF.push(t,"d130bSLuBJD/aa4q8jUcEMQ","ShortageLayer");var o=e("Game");cc.Class({extends:cc.Component,properties:{shine:cc.Node},onLoad:function(){this.shine.runAction(cc.rotateBy(4,360).repeatForever())},getMoney:function(){window.uiNode.updateCopper(500),window.uiNode.showMoney(),o.saveData(),this.node.destroy(),window.btLayer&&window.btLayer.refreshCost()},close:function(){this.node.destroy()}}),cc._RF.pop()},{Game:"Game"}],Tip:[function(e,t,i){"use strict";cc._RF.push(t,"e94c5DkdqFOF6ebUsqu3wCY","Tip"),cc.Class({extends:cc.Component,properties:{label:cc.RichText},init:function(e){this.label.string=e,this.node.scale=.6,this.node.runAction(cc.sequence(cc.scaleTo(.15,1.2),cc.spawn(cc.scaleTo(.15,1),cc.moveBy(2,cc.v2(0,300)),cc.fadeOut(2).easing(cc.easeIn(3))),cc.callFunc(function(){this.node.destroy()}.bind(this))))}}),cc._RF.pop()},{}],UINode:[function(e,t,i){"use strict";cc._RF.push(t,"7533bQa0kpCGK2jV3yFpzrs","UINode");var o=e("Game"),n=e("SdkHelper");cc.Class({extends:cc.Component,properties:{topNode:cc.Node,txtCopper:cc.Label,txtEnergy:cc.Label,strip:cc.ProgressBar,energyLayerPrefab:cc.Prefab,tipPrefab:cc.Prefab,icon:cc.Node,copperNode:cc.Node,shortagePrefab:cc.Prefab},onLoad:function(){window.uiNode=this;var e=cc.view.getFrameSize();e.height/e.width>1.78&&(this.topNode.height=180),this.refresh(),this.schedule(this.updateTime,1)},refresh:function(){this.txtCopper.string=o.data.copper,o.vip?(this.txtEnergy.string="\u65e0\u9650\u4f53\u529b",this.strip.progress=1):(this.txtEnergy.string=o.data.energy+"/6",this.strip.progress=o.data.energy/6)},spendEnergy:function(){if(o.vip)return!0;if(o.data.energy>0)return o.data.energy>=6&&(o.data.recoverTime=n.getTime()),o.data.energy--,this.refresh(),o.saveData(),!0;var e=cc.instantiate(this.energyLayerPrefab);return this.node.addChild(e),!1},updateCopper:function(e){if(e<0&&e+o.data.copper<0){if(o.ad){var t=cc.instantiate(this.shortagePrefab);this.node.addChild(t,-1)}else this.doTip("\u91d1\u5e01\u4e0d\u8db3");return!1}return o.data.copper+=e,this.refresh(),!0},doTip:function(e){var t=cc.instantiate(this.tipPrefab);t.getComponent("Tip").init(e),this.node.addChild(t)},showMoney:function(){this.icon.active=!0,this.icon.scale=1,this.icon.position=cc.v2(0,98);var e=this.copperNode.position.add(this.copperNode.parent.position);this.icon.runAction(cc.sequence(cc.scaleTo(.1,1.1),cc.spawn(cc.moveTo(.5,e),cc.scaleTo(.5,.3)).easing(cc.easeIn(3)),cc.callFunc(function(){this.icon.active=!1}.bind(this))))},updateTime:function(){n.getTime()-o.data.recoverTime>=12e5&&o.data.energy<6&&(o.data.energy++,o.data.recoverTime=n.getTime(),o.saveData(),this.refresh())},showShare:function(e){var t=!1;return o.data.shareCount%6==0?this.doTip("\u5206\u4eab\u5931\u8d25\uff0c\u9700\u8981 \u5206\u4eab\u5230\u7fa4 \u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6~"):o.data.shareCount%6==1||o.data.shareCount%3==2?(e||this.doTip("\u4e0b\u6b21 \u5206\u4eab\u5230\u7fa4 \u624d\u80fd\u83b7\u5f97\u5956\u52b1~"),t=!0):o.data.shareCount%3==0?this.doTip("\u9700\u8981 \u5206\u4eab\u5230\u4e0d\u540c\u7fa4 \u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6~"):(e||this.doTip("\u4e0b\u6b21 \u5206\u4eab\u5230\u4e0d\u540c\u7fa4 \u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6~"),t=!0),o.data.shareCount++,t}}),cc._RF.pop()},{Game:"Game",SdkHelper:"SdkHelper"}],Utils:[function(e,t,i){"use strict";cc._RF.push(t,"8efe8jAGDJOiL9rfH6CJfhG","Utils");var o={numberFormat:function(e){return e/1e13>=1?Math.floor(e/1e12)+"T":e/1e10>=1?Math.floor(e/1e9)+"B":e/1e7>=1?Math.floor(e/1e6)+"M":e/1e4>=1?Math.floor(e/1e3)+"K":e},timeFormat:function(e,t){var i=Math.round(e/1e3),o=i%60,n=t>1?Math.floor(i/60)%60:Math.floor(i/60),s=3==t?Math.floor(i/3600)%24:Math.floor(i/3600),c=Math.floor(i/86400),a=function(e){return e<10?"0"+e:e};return 1==t?a(n)+":"+a(o):2==t?a(s)+":"+a(n)+":"+a(o):c+"\u5929"+s+"\u65f6"+n+"\u5206"},getDifferentRandomNum:function(e,t,i){t=t||1,i=i||0;for(var o=[];o.length<e;){for(var n=Math.floor(Math.random()*(t-i+1))+i,s=!1,c=0;c<o.length;c++)if(o[c]-n==0){s=!0;break}s||o.push(n)}return o},createImage:function(e,t){if(void 0!=window.wx)try{var i=wx.createImage();i.onload=function(){try{var e=new cc.Texture2D;e.initWithElement(i),e.handleLoadedTexture(),t.spriteFrame=new cc.SpriteFrame(e)}catch(e){cc.log(e),t.node.active=!1}},i.src=e}catch(e){cc.log(e),t.node.active=!1}else try{cc.loader.load({url:e,type:"jpg"},function(e,i){t.spriteFrame=new cc.SpriteFrame(i)})}catch(e){cc.log(e),t.node.active=!1}},substring:function(e,t){if(e.replace(/[\u4e00-\u9fa5]/g,"**").length<=t)return e;for(var i=0,o="",n=0;n<e.length&&(/[\u4e00-\u9fa5]/.test(e[n])?i+=2:i+=1,!(i>t));n++)o+=e[n];return o},getMd5Url:function(e){return cc.loader.md5Pipe?cc.loader.md5Pipe.transformURL(cc.url.raw(e)):cc.url.raw(e)}};t.exports=o,cc._RF.pop()},{}],VipLayer:[function(e,t,i){"use strict";cc._RF.push(t,"667beVfkbpHx7nP/Y9oBtB7","VipLayer"),cc.Class({extends:cc.Component,properties:{},doEnergy:function(){window.uiNode.doTip("\u8bf7\u5148\u5173\u6ce8\u516c\u4f17\u53f7")},close:function(){this.node.destroy()}}),cc._RF.pop()},{}],WheelLayer:[function(e,t,i){"use strict";cc._RF.push(t,"fa9a5Vw6PlNqba6xWaZfbfW","WheelLayer");var o=e("Game"),n=e("SdkHelper");cc.Class({extends:cc.Component,properties:{btnClose:cc.Node,btnPlay:cc.Button,wheel:cc.Node,txtCount:cc.Label,txtBtn:cc.Label},onLoad:function(){this.check()},goPlay:function(){var e=function(e){if(o.data.wheel>=3)window.uiNode.doTip("\u4eca\u65e5\u6b21\u6570\u5df2\u7528\u5b8c\uff0c\u8bf7\u660e\u5929\u518d\u6765");else if(!e||window.uiNode.showShare()){for(var t=[.6,.7,.8,.9,1],i=Math.random(),n=0,s=0;s<5;s++)if(i<t[s]){n=s;break}this.btnClose.active=!1,this.btnPlay.interactable=!1;var c=[45,0,90,180,270],a=[0,100,200,300,500];this.wheel.runAction(cc.sequence(cc.rotateBy(2,1800),cc.rotateBy(1,720),cc.callFunc(function(){this.wheel.rotation=this.wheel.rotation%360}.bind(this)),cc.rotateBy(1,c[n]+540-this.wheel.rotation),cc.callFunc(function(){this.wheel.rotation=c[n]-180}.bind(this)),cc.rotateTo(1.5,c[n]),cc.callFunc(function(){o.data.wheel++,this.btnClose.active=!0,this.check(),n>0&&(window.uiNode.updateCopper(a[n]),window.uiNode.showMoney()),o.saveData()}.bind(this))))}}.bind(this);o.ad||n.shareAppMessage(function(){e(!0)}.bind(this))},close:function(){this.node.destroy()},check:function(){this.txtCount.string="\u4eca\u65e5\u5269\u4f59\u6b21\u6570  "+(3-o.data.wheel),this.btnPlay.interactable=!0}}),cc._RF.pop()},{Game:"Game",SdkHelper:"SdkHelper"}]},{},["AdHelper","Ball","BoxMode","BtnLevel","Collider","Config","DailyLayer","Editor","EndLayer","EnergyLayer","Friend","Game","GoldLayer","HelloWorld","HelpLayer","HotlineLayer","Opening","PackLayer","PauseLayer","PlayGound","PlayLayer","Prepare","RankLayer","ReviveLayer","Scissor","SdkHelper","ShortageLayer","Tip","UINode","Utils","VipLayer","WheelLayer"]);